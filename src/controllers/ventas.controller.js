function a0_0x3ef6(_0x2721a2,_0x4ed72d){const _0xd27fc4=a0_0xd27f();return a0_0x3ef6=function(_0x3ef69e,_0x3bbfdd){_0x3ef69e=_0x3ef69e-0xb2;let _0x292b72=_0xd27fc4[_0x3ef69e];return _0x292b72;},a0_0x3ef6(_0x2721a2,_0x4ed72d);}function a0_0xd27f(){const _0x37cdac=['LzpAB','9238691HRQrys','Id_Producto_Tamano',',\x20Solicitado:\x20','UTeER','PUWvF','CndKk','reduce','bxFPx','UCuDW','crearVenta','TgJxa','.\x20Disponible:\x20','vlvTl','DIxkQ',',\x20solicitado\x20','ArQur','Total_Insumos','IhGtD','findOne','json','AtItJ','nJtdQ','FbvfU','pUWpM','findAll','fragancia','sdgFe','PMhcS','Producto_Tamano_Insumos','Tamanos_Data','Id_Productos','FtyqH','bvJgV','Id_Empleados','ngolR','Tallas_Original','6jtSOxD','commit','Error\x20al\x20listar\x20ventas:','KgQkY','TGthF','lXMfX','===','parse','ahaik','GmJnm','Id_Producto_Tallas_Producto_Talla','zflcL','bAmWk','Fecha_Anulacion','QCbPF','PXodS','transaction','No\x20se\x20encontró\x20la\x20relación\x20producto-tamaño\x20para\x20','YDJBP','split','Error\x20de\x20base\x20de\x20datos','CkPWO','Conflicto\x20de\x20datos\x20únicos','Producto\x20no\x20encontrado','xDTNC','vepui','toFixed','Error\x20al\x20validar\x20stock:','toISOString','BAJbK','Documento','Stock','aMsHT','Stock\x20insuficiente\x20para\x20el\x20producto\x20','Tamaños\x20recibidos:','Fecha_Completado','XpDmn','Id_Insumos_Insumo','2018812UeCUcQ','ztEQp','query','Precio_Venta','336485hfwwlg','===\x20DEBUG:\x20Validando\x20stock\x20===','SLIOk','ITZJZ','nombre','AFpnS','oEazr','filter','Diagnóstico\x20de\x20tallas\x20para\x20producto\x20','GbCiM','AWRQO','3126567gDJBHG','Pyvst','===\x20DEBUG:\x20Buscando\x20tallas\x20configuradas\x20para\x20este\x20producto\x20===','QTfix','sVoTc','validarStock','push','eiQif','ofhlA','QSkeQ','kHjoj','szCzg','../models','NdRzo','FqXtE','Sin\x20nombre','vrUta','descripcionTallas','Id_Productos_Producto','Insumos\x20configurados\x20para\x20producto\x20','body','Error\x20al\x20verificar\x20configuración\x20de\x20insumos\x20del\x20producto','reporteVentasMensuales','DfwPf','EApha','iHAwR','M_Pago','gnUEv','M_Pago:','eyevf','Cantidad\x20solicitada:','Venta\x20creada\x20correctamente','zSRIR','obtenerTamanoPorNombre','Rol','xzPXj','Id_Producto_Tamano_Insumos_Producto_Tamano_Insumo','Error\x20al\x20marcar\x20venta\x20como\x20completada','FqLnR','xsuXI','length','beDfB','Tamaño\x20','Id_Ventas','find','OEeud','WnEDQ','rnDHv','Venta\x20anulada\x20correctamente','Talla\x20objeto:','toString','map','ERROR:\x20No\x20se\x20encontró\x20la\x20talla\x20en\x20ninguna\x20tabla','Id_Producto_Tamano_Insumos','ERROR:\x20Nombre\x20de\x20talla\x20vacío','obtenerVentaPorId','stringify','vwLlr','Stock\x20insuficiente\x20para\x20fragancia\x20','Stock\x20insuficiente\x20para\x20insumo\x20general\x20','Admin\x20-\x20','Id_Categoria','YpYEb','\x20requiere\x20especificar\x20tallas.\x20Tallas\x20disponibles:\x20','aiLvi','setHours','Stock\x20suficiente:','stock_general','bqiIp','qBBuO','Id_Agendamientos','cQUpL','VKjKO','Tamanos_Original','Id_Tallas_Talla','LEHbl','precio','marcarVentaCompletada','eTutu','Tallas_Data','Id_Categoria_Insumos','findByPk','rollback','14197770zSpuvP','vrbpm','Detalle\x20de\x20venta\x20es\x20requerido\x20y\x20debe\x20ser\x20un\x20array\x20no\x20vacío','CucLR','TlLSb','KJlqL','CIdWZ','DBtrz','cFIhO','Error\x20al\x20actualizar\x20stock:\x20','HRnrF','VdNqv','kVJAQ','BhVpN','Id_Tallas','qNLsw','FvLvI','aAIcD','Nombre\x20de\x20tamaño\x20no\x20válido\x20para\x20el\x20producto\x20','Producto\x20desconocido','LTRqP','Precio','Unidad_Medida',':\x20disponible\x20','vgmrF','tpkgX','\x20no\x20tiene\x20el\x20tamaño\x20','ozCus','KXPzj','Zaxgk','Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20','Efectivo','Total','AHUEd','oCcKG','lyNVL','UkRqZ','Error\x20al\x20generar\x20reporte\x20diario','PkjiG','Fecha:','EKgWt','Talla\x20encontrada\x20por\x20nombre:','ERROR:\x20Stock\x20insuficiente','tieneTamanos','Nombre\x20de\x20talla\x20no\x20válido','\x20x\x20','Tamanos_Data_Original','KEkMs','RPUgO','axQwy','Error\x20al\x20marcar\x20venta\x20como\x20completada:\x20','FHTLN','validarStockVenta','ID\x20de\x20producto\x20es\x20requerido','MDsmz','Error\x20en\x20diagnóstico\x20de\x20tallas:','Administrador','slice','KZiAW','env','join','error','QpUic','AWGgm','miQIM','BOXrw','Error\x20en\x20diagnóstico:','nwHtn','talla','Detalle_Venta','LPLoz','bPbMv','lOwwp',',\x20Necesario:\x20','ABUpK','Producto\x20con\x20ID\x20','diagnosticarTallasProducto','jauKX','eqsQP','\x20no\x20encontrada\x20para\x20el\x20producto\x20','params','GKqyr','DjSWR','Tamano_Insumos','kyuxk','yVETt','verificarConfiguracionInsumosProducto','rRbvr','status','Error\x20al\x20anular\x20venta:\x20','TxbrU','Stock\x20disponible:','update','includes','zoiFw','iVpJh','Transferencia','UeWIf','twZwm','Stock\x20general\x20insuficiente\x20para\x20el\x20producto\x20','between','Stock\x20actual:','Tamanos','vGUlo','okXph','NKfMZ','HFXGL','insuficiente','hrwUK','\x20configurado','Id_Tamano','iaJeG','Anulada','\x20unidades','jWgbA','ID\x20de\x20talla:','Nombre_Tamano','BlXmJ','2sbWfKN','bsLcg','gWxRv','qPZxW','Error\x20al\x20marcar\x20venta\x20como\x20completada:','hAEIw','Id_Insumos','set','GPeVg','KaCoZ','WDFVf','Cantidad_Maxima','GfAqh','Error\x20de\x20validación','Talla','.\x20Tallas\x20disponibles:\x20','IhCml','Cantidad','El\x20producto\x20','tieneTallas','lVUyl','Configuración\x20de\x20tallas\x20para\x20producto\x20','no\x20válido','yPFxp','mVeaW','hjjsh','Subtotal','PukqD','VjQLq','12XQnKkv','Faltan\x20datos\x20requeridos','Referencia','kzvfg','JNgSo','ZOvMN','getMonth','vsEDp','Nombre\x20talla\x20normalizado:','obtenerTallasProducto','sort','MCaAK','TCbkU','tuXVW','Error\x20al\x20validar\x20stock','Error\x20al\x20verificar\x20configuración\x20de\x20tallas:','PdYoE','Id_Agendamientos_Agendamiento','Id_Cliente:','Error\x20al\x20obtener\x20venta','psAtL','1951817EfyhhV','QTJPG','Id_Categoria_Producto','YgWrI','chIGi','oEDNn','OzBaa','owEyP','JuPbK','Id_Tamano_Tamano','jnCxo','sclPE','Error\x20al\x20generar\x20reporte\x20mensual','Tallas','DHvmY','La\x20transferencia\x20requiere\x20número\x20de\x20referencia','HOWZr','MBEhg','errors','LOPNF','IUGAD','Error\x20al\x20verificar\x20configuración\x20de\x20insumos:','JZjTD','SCYHw','Cantidad_Consumo','string','kxymg','Id_Empleados_Empleado','5ewzZGF','reporteVentasDiarias','ILkaz','YprUA','8HwdJFA','vNbMQ','SqhLC','KUaYi','DWSUC','Tallas_Data_Original',',\x20tamaño\x20','Configuración\x20de\x20insumos\x20para\x20producto\x20','La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20anularla','Venta\x20marcada\x20como\x20completada\x20correctamente','Nombre\x20de\x20tamaño\x20no\x20válido','Sin\x20Categoría','Desconocido','Fecha','lvHed','UXFYJ','La\x20venta\x20debe\x20tener\x20estado\x203\x20(pendiente)\x20para\x20poder\x20marcarla\x20como\x20completada','kGCSH','values','bbKvh','pQYcP','cwDdZ','dFbmh','success','Tamaño\x20no\x20configurado\x20para\x20este\x20producto','MvKPu','UEPAd','Error\x20al\x20obtener\x20tamaño\x20por\x20nombre:','no\x20coincide','Id_Usuario','Id_Empleados:','BDbxZ','Error\x20al\x20obtener\x20ventas:\x20','trtqN','Nombre\x20del\x20tamaño\x20es\x20requerido','Talla\x20','log','detalleTalla','auIfF','trim','create','Estado','ylUfs','lDzsT','zMQyI','\x20x\x20Talla\x20','qstfw','cantidad','TMHkt','has','\x20tamaño(s)\x20sin\x20insumos\x20configurados:\x20','N/A','KSmtZ','khksr','Servicio','PXGQT','CifFH','Error\x20al\x20obtener\x20tallas\x20del\x20producto:','development','MGumh','Nombre','gaOns','getDate','Error\x20al\x20obtener\x20ventas','\x20no\x20encontrada','total','xkRDY','Id_Cliente','Detalles:','listarVentas','7236180IZXMOr','mgQdd','Venta\x20no\x20encontrada','EKDgZ','../config/db','Talla\x20no\x20encontrada','message','PrecioTotal','isArray','forEach','NVjGJ','mxVnG','ID\x20de\x20producto\x20es\x20requerido\x20para\x20todos\x20los\x20items','OVKzf','Método\x20de\x20pago\x20no\x20válido','NODE_ENV','JpWjd','IYSVX','Id_Servicio','Error\x20al\x20obtener\x20tamaños\x20del\x20producto:','Tallas\x20recibidas:','KrrhS','SEsjq','Id_Producto_Tallas','BIICF','Error\x20al\x20verificar\x20insumos:','Error\x20al\x20obtener\x20venta\x20por\x20ID:','sequelize','hTPWC','QLBio','NsNHy','cpsHX','===\x20DEBUG:\x20Validando\x20stock\x20para\x20producto','\x20no\x20encontrado','ltIBT','Stock\x20insuficiente\x20para\x20talla\x20'];a0_0xd27f=function(){return _0x37cdac;};return a0_0xd27f();}const a0_0x15b2bd=a0_0x3ef6;(function(_0x158d1c,_0x18e9ab){const _0x39bc0b=a0_0x3ef6,_0x2a49e1=_0x158d1c();while(!![]){try{const _0x1b08f2=parseInt(_0x39bc0b(0x121))/0x1+parseInt(_0x39bc0b(0x1f5))/0x2*(parseInt(_0x39bc0b(0x12c))/0x3)+-parseInt(_0x39bc0b(0x11d))/0x4*(parseInt(_0x39bc0b(0x243))/0x5)+parseInt(_0x39bc0b(0xf7))/0x6*(parseInt(_0x39bc0b(0x227))/0x7)+-parseInt(_0x39bc0b(0x247))/0x8*(parseInt(_0x39bc0b(0x28d))/0x9)+parseInt(_0x39bc0b(0x17f))/0xa+-parseInt(_0x39bc0b(0xd3))/0xb*(parseInt(_0x39bc0b(0x212))/0xc);if(_0x1b08f2===_0x18e9ab)break;else _0x2a49e1['push'](_0x2a49e1['shift']());}catch(_0x3b3f76){_0x2a49e1['push'](_0x2a49e1['shift']());}}}(a0_0xd27f,0xe2ba6));const {Ventas,Detalle_Venta,Productos,Producto_Tallas,Producto_Tamano_Insumos,Producto_Tamano,Tamano,Tamano_Insumos,Tallas,Agendamientos,Empleados,Servicios,Clientes,Insumos}=require(a0_0x15b2bd(0x138)),{sequelize}=require(a0_0x15b2bd(0xb2)),{UniqueConstraintError,ValidationError,DatabaseError}=require(a0_0x15b2bd(0xc9)),validarCliente=async(_0x455fee,_0x5c327e)=>{const _0x24f9f7=a0_0x15b2bd,_0x14f332={'ITZJZ':'Cliente\x20no\x20encontrado'},_0x1d77af=await Clientes[_0x24f9f7(0x17d)](_0x455fee,{'transaction':_0x5c327e});if(!_0x1d77af)throw new Error(_0x14f332[_0x24f9f7(0x124)]);return _0x1d77af;},obtenerInfoEmpleado=async(_0x5dd4f2,_0x355ef4=null)=>{const _0xab3892=a0_0x15b2bd,_0x4da33f={'XpDmn':function(_0x4406c0,_0x49b3ae){return _0x4406c0(_0x49b3ae);},'auIfF':_0xab3892(0x138),'erclW':function(_0x20a040,_0x27dd28){return _0x20a040===_0x27dd28;},'eiKYY':_0xab3892(0x1b7)},_0x2311b9=await Empleados['findByPk'](_0x5dd4f2,{'transaction':_0x355ef4});if(_0x2311b9)return{'Id_Empleados':_0x2311b9['Id_Empleados'],'Nombre':_0x2311b9[_0xab3892(0x283)],'esAdministrador':![]};const {Usuarios:_0x3dbec5,Roles:_0x59a094}=_0x4da33f[_0xab3892(0x11b)](require,_0x4da33f[_0xab3892(0x26d)]),_0x18bac7=await _0x3dbec5['findByPk'](_0x5dd4f2,{'include':[{'model':_0x59a094,'as':'Rol'}],'transaction':_0x355ef4});if(_0x18bac7&&_0x18bac7[_0xab3892(0x14e)]&&_0x4da33f['erclW'](_0x18bac7['Rol'][_0xab3892(0x283)],_0x4da33f['eiKYY']))return{'Id_Empleados':_0x18bac7[_0xab3892(0x264)],'Nombre':_0xab3892(0x168)+_0x18bac7['Documento'],'esAdministrador':!![]};return null;},validarEmpleado=async(_0x24444d,_0x5e198c)=>{const _0x407350=a0_0x15b2bd,_0x1f0c08={'beDfB':function(_0xde3e1d,_0x35fa3a,_0x337372){return _0xde3e1d(_0x35fa3a,_0x337372);},'Xahud':'Empleado\x20no\x20encontrado','QTfix':function(_0x4eb111,_0x397b67){return _0x4eb111(_0x397b67);},'SCYHw':'../models','khksr':'N/A'},_0x4f756d=await _0x1f0c08[_0x407350(0x155)](obtenerInfoEmpleado,_0x24444d,_0x5e198c);if(!_0x4f756d)throw new Error(_0x1f0c08['Xahud']);if(_0x4f756d['esAdministrador']){const {Usuarios:_0x5417a4}=_0x1f0c08[_0x407350(0x12f)](require,_0x1f0c08[_0x407350(0x23e)]),_0x4cec77=await _0x5417a4[_0x407350(0x17d)](_0x24444d,{'transaction':_0x5e198c});return{'Id_Empleados':_0x4cec77[_0x407350(0x264)],'Nombre':_0x407350(0x168)+_0x4cec77[_0x407350(0x115)],'Documento':_0x4cec77[_0x407350(0x115)],'Tipo_Documento':_0x1f0c08[_0x407350(0x27c)],'Celular':_0x1f0c08[_0x407350(0x27c)],'F_Nacimiento':new Date(),'Direccion':_0x1f0c08[_0x407350(0x27c)],'Sexo':_0x1f0c08['khksr'],'Estado':!![],'esAdministrador':!![]};}return await Empleados[_0x407350(0x17d)](_0x24444d,{'transaction':_0x5e198c});},validarMetodoPago=(_0x16aac8,_0x4f6687)=>{const _0x133484=a0_0x15b2bd,_0x255166={'PukqD':_0x133484(0x19e),'cwDdZ':'Tarjeta','ZANxx':_0x133484(0x1df),'hjjsh':'PSE','kHjoj':function(_0x1021ba,_0x2d769d){return _0x1021ba===_0x2d769d;}},_0x41e21b=[_0x255166[_0x133484(0x210)],_0x255166[_0x133484(0x25c)],_0x255166['ZANxx'],_0x255166[_0x133484(0x20e)]];if(!_0x41e21b['includes'](_0x16aac8))throw new Error(_0x133484(0xbc));if(_0x255166[_0x133484(0x136)](_0x16aac8,_0x133484(0x1df))&&!_0x4f6687)throw new Error(_0x133484(0x236));},calcularPrecio=async(_0x512086,_0x3a6839,_0x2beb86,_0x286418,_0x390215)=>{const _0x27ce90=a0_0x15b2bd,_0x2142b9={'vrUta':function(_0x5d725c,_0x361f95){return _0x5d725c>_0x361f95;},'DfwPf':function(_0x672ad3,_0x482906){return _0x672ad3(_0x482906);},'bbKvh':function(_0x31757d,_0x37f904){return _0x31757d*_0x37f904;},'nUeZE':function(_0x2bce9c,_0x305b81){return _0x2bce9c(_0x305b81);},'HSNpl':function(_0x1e69a1,_0x4c4856){return _0x1e69a1(_0x4c4856);},'WWvOg':function(_0x3c29e2,_0x1183ec){return _0x3c29e2(_0x1183ec);},'chIGi':function(_0x628498,_0x4573a0){return _0x628498(_0x4573a0);}};let _0x4f7660=0x0;try{if(_0x2beb86&&_0x2142b9['vrUta'](_0x2beb86['length'],0x0))for(const _0x42d963 of _0x2beb86){const _0x4218b9=_0x2142b9[_0x27ce90(0x143)](Number,_0x42d963[_0x27ce90(0xb5)]||0x0);_0x4f7660+=_0x4218b9;}else{if(_0x3a6839&&_0x2142b9[_0x27ce90(0x13c)](_0x3a6839[_0x27ce90(0x154)],0x0))for(const _0x59b0e6 of _0x3a6839){const _0x4d7cf9=await Producto_Tallas['findOne']({'where':{'Id_Productos':_0x512086[_0x27ce90(0xf1)],'Talla':_0x59b0e6[_0x27ce90(0x1c3)]},'transaction':_0x390215});if(_0x4d7cf9){const _0x767eaf=_0x2142b9[_0x27ce90(0x25a)](_0x2142b9['nUeZE'](Number,_0x512086[_0x27ce90(0x120)])+_0x2142b9[_0x27ce90(0x143)](Number,_0x4d7cf9[_0x27ce90(0x194)]),_0x59b0e6[_0x27ce90(0x276)]);_0x4f7660+=_0x767eaf;}else{const _0x5ec821=_0x2142b9[_0x27ce90(0x25a)](_0x2142b9['HSNpl'](Number,_0x512086[_0x27ce90(0x120)]),_0x59b0e6[_0x27ce90(0x276)]);_0x4f7660+=_0x5ec821;}}else _0x4f7660=_0x2142b9['bbKvh'](_0x2142b9['WWvOg'](Number,_0x512086[_0x27ce90(0x120)]),_0x286418);}(!_0x4f7660||isNaN(_0x4f7660))&&(_0x2beb86&&_0x2beb86[_0x27ce90(0x154)]>0x0?_0x4f7660=_0x2beb86[_0x27ce90(0xd9)]((_0x58afa9,_0x258bd6)=>{const _0x5c05f5=Number(_0x258bd6['PrecioTotal']||0x0);return _0x58afa9+_0x5c05f5;},0x0):_0x4f7660=_0x2142b9['bbKvh'](_0x2142b9[_0x27ce90(0x22b)](Number,_0x512086['Precio_Venta']),_0x286418));}catch(_0x39ec15){_0x4f7660=_0x2142b9['bbKvh'](_0x2142b9[_0x27ce90(0x143)](Number,_0x512086[_0x27ce90(0x120)]),_0x286418);}return _0x4f7660;},actualizarStockProducto=async(_0x573bd6,_0x1b24a3,_0x484b88)=>{const _0x485ea6=a0_0x15b2bd,_0x50faa2={'iaJeG':function(_0xbbb2da,_0x47930b){return _0xbbb2da(_0x47930b);}},_0x3874d1=await Productos[_0x485ea6(0x17d)](_0x573bd6,{'transaction':_0x484b88});if(!_0x3874d1)throw new Error(_0x485ea6(0x1ca)+_0x573bd6+_0x485ea6(0xcf));const _0x345388=_0x50faa2[_0x485ea6(0x1ee)](Number,_0x3874d1['Stock']||0x0),_0x4a2138=_0x345388-_0x1b24a3;if(_0x4a2138<0x0)throw new Error(_0x485ea6(0x118)+_0x3874d1[_0x485ea6(0x283)]+_0x485ea6(0xde)+_0x345388+_0x485ea6(0xd5)+_0x1b24a3);return await _0x3874d1[_0x485ea6(0x1db)]({'Stock':_0x4a2138},{'transaction':_0x484b88}),_0x4a2138;},actualizarStockTallas=async(_0x4d4e07,_0x3445e4,_0x41bae3)=>{const _0x5f20c2=a0_0x15b2bd,_0x1c68a2={'HhnAC':_0x5f20c2(0x176),'OVKzf':_0x5f20c2(0x18d),'PkjiG':_0x5f20c2(0x283),'kzvfg':function(_0x26bfaf,_0x3eb232){return _0x26bfaf(_0x3eb232);},'NVjGJ':function(_0x5d5f5c,_0x22d736){return _0x5d5f5c(_0x22d736);},'BOXrw':function(_0xe19290,_0x30b5c8){return _0xe19290-_0x30b5c8;},'MGumh':function(_0x12cac0,_0x1023cb){return _0x12cac0<_0x1023cb;},'vNbMQ':function(_0x484627,_0x49c71b){return _0x484627>_0x49c71b;}};let _0x490185=0x0;for(const _0x460d2f of _0x3445e4){const _0x2912fc=_0x460d2f['talla']||_0x460d2f['Talla']||_0x460d2f[_0x5f20c2(0x125)]||'';if(!_0x2912fc)throw new Error(_0x5f20c2(0x19d)+_0x4d4e07);const _0x19a58e=await Producto_Tallas[_0x5f20c2(0xeb)]({'where':{'Id_Productos':_0x4d4e07},'include':[{'model':Tallas,'as':_0x1c68a2['HhnAC'],'attributes':[_0x1c68a2[_0x5f20c2(0xbb)],_0x1c68a2[_0x5f20c2(0x1a5)]]}],'transaction':_0x41bae3}),_0x2c79e3=_0x19a58e[_0x5f20c2(0x158)](_0x23e2cc=>_0x23e2cc[_0x5f20c2(0x176)]?.[_0x5f20c2(0x283)]===_0x2912fc);let _0x3b08f2;if(_0x2c79e3)_0x3b08f2=_0x2c79e3;else throw new Error('Talla\x20'+_0x2912fc+'\x20no\x20encontrada\x20para\x20el\x20producto\x20'+_0x4d4e07+_0x5f20c2(0x204)+_0x19a58e[_0x5f20c2(0x15f)](_0x1b0b03=>_0x1b0b03[_0x5f20c2(0x176)]?.[_0x5f20c2(0x283)]||_0x5f20c2(0x27a))['join'](',\x20'));if(!_0x3b08f2)throw new Error('Talla\x20'+_0x2912fc+'\x20no\x20encontrada\x20para\x20el\x20producto\x20'+_0x4d4e07);const _0x3f00da=_0x1c68a2[_0x5f20c2(0x215)](Number,_0x3b08f2[_0x5f20c2(0x116)]||0x0),_0x38f91a=_0x1c68a2[_0x5f20c2(0xb8)](Number,_0x460d2f[_0x5f20c2(0x276)]||_0x460d2f[_0x5f20c2(0x206)]||0x0),_0x53ff5c=_0x1c68a2[_0x5f20c2(0x1c0)](_0x3f00da,_0x38f91a);if(_0x1c68a2[_0x5f20c2(0x282)](_0x53ff5c,0x0))throw new Error(_0x5f20c2(0xd1)+_0x2912fc+'.\x20Disponible:\x20'+_0x3f00da+_0x5f20c2(0xd5)+_0x38f91a);await _0x3b08f2[_0x5f20c2(0x1db)]({'Stock':_0x53ff5c},{'transaction':_0x41bae3}),_0x490185+=_0x38f91a;}if(_0x1c68a2[_0x5f20c2(0x248)](_0x490185,0x0)){const _0x25623f=await Productos[_0x5f20c2(0x17d)](_0x4d4e07,{'transaction':_0x41bae3});if(!_0x25623f)throw new Error(_0x5f20c2(0x1ca)+_0x4d4e07+_0x5f20c2(0xcf));const _0x37213a=Number(_0x25623f[_0x5f20c2(0x116)]||0x0),_0x2b9870=_0x1c68a2[_0x5f20c2(0x1c0)](_0x37213a,_0x490185);if(_0x1c68a2['MGumh'](_0x2b9870,0x0))throw new Error(_0x5f20c2(0x1e2)+_0x25623f['Nombre']+'.\x20Disponible:\x20'+_0x37213a+_0x5f20c2(0xd5)+_0x490185);await _0x25623f[_0x5f20c2(0x1db)]({'Stock':_0x2b9870},{'transaction':_0x41bae3});}},actualizarStockInsumos=async(_0x4bad04,_0x38fdf4,_0x17212e)=>{const _0x1d56ee=a0_0x15b2bd,_0xc50ee2={'PdYoE':'Id_Insumos_Insumo','qPZxW':function(_0x1e411c,_0x5cf486){return _0x1e411c(_0x5cf486);},'zflcL':function(_0xbcec5a,_0x26b08e){return _0xbcec5a*_0x26b08e;},'IhCml':function(_0x2124d7,_0x2e2653){return _0x2124d7(_0x2e2653);},'ltIBT':function(_0x5cc1af,_0x1b1ea4){return _0x5cc1af-_0x1b1ea4;},'EKgWt':function(_0x19c3d9,_0x14da48){return _0x19c3d9(_0x14da48);},'psAtL':function(_0x119321,_0x168f14){return _0x119321*_0x168f14;},'eiQif':function(_0x2162c0,_0x5afa3c){return _0x2162c0<_0x5afa3c;}};for(const _0x2258cb of _0x38fdf4){const _0x19e464=_0x2258cb[_0x1d56ee(0x125)]||_0x2258cb[_0x1d56ee(0x283)]||'';if(!_0x19e464)throw new Error(_0x1d56ee(0x191)+_0x4bad04);const _0x2c8542=await Tamano[_0x1d56ee(0xe5)]({'where':{'Nombre':_0x19e464},'transaction':_0x17212e});if(!_0x2c8542)throw new Error(_0x1d56ee(0x156)+_0x19e464+_0x1d56ee(0xcf));const _0xcbe370=await Producto_Tamano[_0x1d56ee(0xe5)]({'where':{'Id_Productos':_0x4bad04,'Id_Tamano':_0x2c8542[_0x1d56ee(0x1ed)]},'transaction':_0x17212e});if(!_0xcbe370)throw new Error('El\x20producto\x20'+_0x4bad04+_0x1d56ee(0x199)+_0x2258cb[_0x1d56ee(0x125)]+_0x1d56ee(0x1ec));const _0xf0f797=await Producto_Tamano_Insumos['findAll']({'where':{'Id_Producto_Tamano':_0xcbe370['Id_Producto_Tamano']},'include':[{'model':Insumos,'as':_0xc50ee2[_0x1d56ee(0x222)]}],'transaction':_0x17212e}),_0x4524ce=await Tamano_Insumos['findAll']({'where':{'Id_Tamano':_0x2c8542['Id_Tamano']},'include':[{'model':Insumos,'as':_0xc50ee2['PdYoE']}],'transaction':_0x17212e}),_0x4b8075=Number(_0x2258cb[_0x1d56ee(0x206)]||_0x2258cb[_0x1d56ee(0x276)]||0x0),_0x36c01b=new Map();for(const _0x2c6311 of _0xf0f797){const _0xdc003f=_0x2c6311['Id_Insumos_Insumo'],_0x155974=_0xc50ee2[_0x1d56ee(0x1f8)](Number,_0x2c6311[_0x1d56ee(0x23f)]||0x0),_0x13f177=_0xc50ee2[_0x1d56ee(0x102)](_0x155974,_0x4b8075),_0x531bf5=_0xc50ee2[_0x1d56ee(0x205)](Number,_0xdc003f['Stock']||0x0),_0x10de25=_0xc50ee2[_0x1d56ee(0xd0)](_0x531bf5,_0x13f177);if(_0x10de25<0x0)throw new Error('Stock\x20insuficiente\x20para\x20fragancia\x20'+_0xdc003f[_0x1d56ee(0x283)]+_0x1d56ee(0xde)+_0x531bf5+_0x1d56ee(0x1c8)+_0x13f177+'\x20('+_0x155974+_0x1d56ee(0x1ac)+_0x4b8075+')');await _0xdc003f[_0x1d56ee(0x1db)]({'Stock':_0x10de25},{'transaction':_0x17212e}),_0x36c01b[_0x1d56ee(0x1fc)](_0xdc003f[_0x1d56ee(0x1fb)],!![]);}for(const _0x2f4dc7 of _0x4524ce){const _0x213bc4=_0x2f4dc7[_0x1d56ee(0x11c)];if(_0x36c01b[_0x1d56ee(0x278)](_0x213bc4['Id_Insumos']))continue;const _0x340ad5=_0xc50ee2[_0x1d56ee(0x1a7)](Number,_0x2f4dc7[_0x1d56ee(0x206)]||0x0),_0x1e0cf3=_0xc50ee2[_0x1d56ee(0x226)](_0x340ad5,_0x4b8075),_0x111f12=_0xc50ee2[_0x1d56ee(0x1a7)](Number,_0x213bc4[_0x1d56ee(0x116)]||0x0),_0x5735f3=_0xc50ee2['ltIBT'](_0x111f12,_0x1e0cf3);if(_0xc50ee2[_0x1d56ee(0x133)](_0x5735f3,0x0))throw new Error('Stock\x20insuficiente\x20para\x20insumo\x20general\x20'+_0x213bc4[_0x1d56ee(0x283)]+'.\x20Disponible:\x20'+_0x111f12+_0x1d56ee(0x1c8)+_0x1e0cf3+'\x20('+_0x340ad5+_0x1d56ee(0x1ac)+_0x4b8075+')');await _0x213bc4[_0x1d56ee(0x1db)]({'Stock':_0x5735f3},{'transaction':_0x17212e});}}};exports['verificarInsumosProducto']=async(_0x224540,_0x1abf17)=>{const _0x21cfd8=a0_0x15b2bd,_0x2998d8={'gaOns':_0x21cfd8(0x1bc),'TCbkU':_0x21cfd8(0x11c),'vGUlo':_0x21cfd8(0xc7)};try{const {idProducto:_0x4facfd,nombreTamano:_0x1a0e96}=_0x224540[_0x21cfd8(0x1cf)],_0x151acf=await Tamano[_0x21cfd8(0xe5)]({'where':{'Nombre':_0x1a0e96}});if(!_0x151acf)return _0x1abf17[_0x21cfd8(0x1d7)](0x194)[_0x21cfd8(0xe6)]({'status':_0x2998d8['gaOns'],'message':'Tamaño\x20'+_0x1a0e96+_0x21cfd8(0xcf)});const _0xf3e685=await Producto_Tamano[_0x21cfd8(0xe5)]({'where':{'Id_Productos':_0x4facfd,'Id_Tamano':_0x151acf[_0x21cfd8(0x1ed)]}});if(!_0xf3e685)return _0x1abf17[_0x21cfd8(0x1d7)](0x194)[_0x21cfd8(0xe6)]({'status':_0x2998d8[_0x21cfd8(0x284)],'message':_0x21cfd8(0x207)+_0x4facfd+_0x21cfd8(0x199)+_0x1a0e96+_0x21cfd8(0x1ec)});const _0x41a115=await Producto_Tamano_Insumos[_0x21cfd8(0xeb)]({'where':{'Id_Producto_Tamano':_0xf3e685[_0x21cfd8(0xd4)]},'include':[{'model':Insumos,'as':_0x2998d8[_0x21cfd8(0x21e)]}]}),_0x4f1d59=_0x41a115[_0x21cfd8(0x15f)](_0xded12d=>({'Id_Insumo':_0xded12d[_0x21cfd8(0x11c)][_0x21cfd8(0x1fb)],'Nombre':_0xded12d[_0x21cfd8(0x11c)][_0x21cfd8(0x283)],'Stock_Actual':_0xded12d['Id_Insumos_Insumo'][_0x21cfd8(0x116)],'Cantidad_Consumo':_0xded12d[_0x21cfd8(0x23f)],'Unidad_Medida':_0xded12d[_0x21cfd8(0x11c)][_0x21cfd8(0x195)]}));_0x1abf17['json']({'status':_0x21cfd8(0x25e),'message':_0x21cfd8(0x13f)+_0x4facfd+_0x21cfd8(0x24d)+_0x1a0e96,'data':{'Id_Producto':_0x4facfd,'Id_Tamano':_0x151acf[_0x21cfd8(0x1ed)],'Nombre_Tamano':_0x1a0e96,'Id_Producto_Tamano':_0xf3e685[_0x21cfd8(0xd4)],'Total_Insumos':_0x4f1d59[_0x21cfd8(0x154)],'Insumos':_0x4f1d59}});}catch(_0x33242c){console[_0x21cfd8(0x1bc)](_0x2998d8[_0x21cfd8(0x1e6)],_0x33242c),_0x1abf17[_0x21cfd8(0x1d7)](0x1f4)[_0x21cfd8(0xe6)]({'status':_0x2998d8[_0x21cfd8(0x284)],'message':'Error\x20al\x20verificar\x20insumos\x20del\x20producto','detail':_0x33242c[_0x21cfd8(0xb4)]});}},exports[a0_0x15b2bd(0x28c)]=async(_0x2b08cb,_0x4ecbf7)=>{const _0x426888=a0_0x15b2bd,_0x320c5e={'xzPXj':function(_0x223cff,_0x5deb4c){return _0x223cff(_0x5deb4c);},'LPLoz':_0x426888(0x253),'KZiAW':function(_0x4c17ef,_0x4acaf1){return _0x4c17ef+_0x4acaf1;},'axQwy':function(_0x1d6c26,_0x25393e){return _0x1d6c26===_0x25393e;},'twZwm':function(_0x259533,_0x489b37){return _0x259533(_0x489b37);},'MCaAK':_0x426888(0x13e),'TxbrU':_0x426888(0x150),'WDFVf':_0x426888(0x223),'LOPNF':'Id_Empleados_Empleado','SLIOk':_0x426888(0xf4),'bYYGk':_0x426888(0x283),'ZOvMN':_0x426888(0x25e),'JZjTD':_0x426888(0xf9),'FHTLN':'error','lOwwp':_0x426888(0x281),'eyevf':_0x426888(0x286)};try{const _0x49bab9=await Ventas[_0x426888(0xeb)]({'include':[{'model':Detalle_Venta,'as':_0x426888(0x1c4),'include':[{'model':Productos,'as':_0x320c5e[_0x426888(0x21d)]},{'model':Producto_Tallas,'as':_0x426888(0x101)},{'model':Producto_Tamano_Insumos,'as':_0x320c5e[_0x426888(0x1d9)]},{'model':Servicios,'as':_0x426888(0x27d)}]},{'model':Agendamientos,'as':_0x320c5e[_0x426888(0x1ff)],'required':![]},{'model':Empleados,'as':_0x320c5e[_0x426888(0x23a)],'attributes':[_0x320c5e[_0x426888(0x123)],_0x320c5e['bYYGk']]}]}),_0x13d02a=await Promise['all'](_0x49bab9[_0x426888(0x15f)](async _0x72fbe1=>{const _0x483e38=_0x426888,_0x3804e1={'BDbxZ':function(_0x475cbd,_0x5259ca){return _0x475cbd>_0x5259ca;}},_0x2dc9b9=_0x72fbe1['toJSON'](),_0x3ec3e6=_0x2dc9b9[_0x483e38(0x1c4)]||[],_0x1cdc40=_0x2dc9b9['Id_Agendamientos_Agendamiento']||null,_0x2029e8=_0x2dc9b9[_0x483e38(0x242)]||{};let _0x17ae3b=_0x483e38(0x253);if(_0x2dc9b9[_0x483e38(0xf4)]){const _0x35d258=await _0x320c5e[_0x483e38(0x14f)](obtenerInfoEmpleado,_0x2dc9b9[_0x483e38(0xf4)]);_0x17ae3b=_0x35d258?.[_0x483e38(0x283)]||_0x320c5e[_0x483e38(0x1c5)];}const _0x4693e3=_0x3ec3e6[_0x483e38(0x15f)](_0x24a5e2=>{const _0x410591=_0x483e38,_0x4c3bd2={..._0x24a5e2};if(_0x24a5e2[_0x410591(0x17b)])try{_0x4c3bd2[_0x410591(0x234)]=JSON['parse'](_0x24a5e2['Tallas_Data']);}catch(_0x331658){_0x4c3bd2[_0x410591(0x234)]=[];}else _0x4c3bd2[_0x410591(0x234)]=[];if(_0x24a5e2[_0x410591(0xf0)])try{_0x4c3bd2[_0x410591(0x1e5)]=JSON[_0x410591(0xfe)](_0x24a5e2[_0x410591(0xf0)]);}catch(_0x3d12ed){_0x4c3bd2[_0x410591(0x1e5)]=[];}else _0x4c3bd2[_0x410591(0x1e5)]=[];return _0x4c3bd2[_0x410591(0x208)]=_0x4c3bd2[_0x410591(0x234)]&&_0x3804e1[_0x410591(0x266)](_0x4c3bd2['Tallas'][_0x410591(0x154)],0x0),_0x4c3bd2[_0x410591(0x1aa)]=_0x4c3bd2[_0x410591(0x1e5)]&&_0x4c3bd2[_0x410591(0x1e5)]['length']>0x0,_0x4c3bd2[_0x410591(0x208)]&&(_0x4c3bd2[_0x410591(0x13d)]=_0x4c3bd2[_0x410591(0x234)]['map'](_0x4512a8=>(_0x4512a8[_0x410591(0x276)]||_0x4512a8[_0x410591(0x206)]||0x0)+_0x410591(0x274)+(_0x4512a8[_0x410591(0x1c3)]||_0x4512a8[_0x410591(0x203)]||_0x4512a8[_0x410591(0x125)]||'N/A'))[_0x410591(0x1bb)](',\x20')),_0x4c3bd2[_0x410591(0x1aa)]&&(_0x4c3bd2['descripcionTamanos']=_0x4c3bd2[_0x410591(0x1e5)]['map'](_0x5c3f60=>_0x5c3f60['Cantidad']+_0x410591(0x1ac)+_0x5c3f60['nombre'])[_0x410591(0x1bb)](',\x20')),_0x4c3bd2;}),_0x51b4bd=_0x4693e3[_0x483e38(0xd9)]((_0x13692c,_0x10b144)=>_0x13692c+Number(_0x10b144['Subtotal']||0x0),0x0),_0x3779d3=_0x1cdc40?_0x320c5e[_0x483e38(0x14f)](Number,_0x1cdc40['Subtotal']||0x0):0x0,_0x14da02=_0x320c5e[_0x483e38(0x1b9)](_0x51b4bd,_0x3779d3),_0x311baf=_0x320c5e[_0x483e38(0x1b0)](_0x320c5e[_0x483e38(0x1e1)](Number,_0x2dc9b9[_0x483e38(0x19f)]),_0x14da02);return{'Id_Ventas':_0x2dc9b9[_0x483e38(0x157)],'Id_Agendamientos':_0x2dc9b9[_0x483e38(0x172)],'Id_Cliente':_0x2dc9b9[_0x483e38(0x28a)],'Id_Empleados':_0x2dc9b9['Id_Empleados'],'Nombre_Empleado':_0x17ae3b,'Fecha':_0x2dc9b9[_0x483e38(0x254)],'Total':_0x2dc9b9[_0x483e38(0x19f)],'Estado':_0x2dc9b9[_0x483e38(0x270)],'M_Pago':_0x2dc9b9[_0x483e38(0x146)],'Referencia':_0x2dc9b9[_0x483e38(0x214)],'Detalle_Venta':_0x4693e3,'tieneAgendamiento':!!_0x2dc9b9[_0x483e38(0x172)],'Agendamiento':_0x1cdc40,'totalValidado':_0x311baf};}));_0x4ecbf7[_0x426888(0xe6)]({'status':_0x320c5e[_0x426888(0x217)],'data':_0x13d02a});}catch(_0x39b261){console[_0x426888(0x1bc)](_0x320c5e[_0x426888(0x23d)],_0x39b261),_0x4ecbf7[_0x426888(0x1d7)](0x1f4)[_0x426888(0xe6)]({'status':_0x320c5e[_0x426888(0x1b2)],'message':process['env'][_0x426888(0xbd)]===_0x320c5e[_0x426888(0x1c7)]?_0x426888(0x267)+_0x39b261['message']:_0x320c5e[_0x426888(0x149)]});}},exports[a0_0x15b2bd(0x163)]=async(_0x13e2a8,_0x3d6a80)=>{const _0x13634e=a0_0x15b2bd,_0x3d8272={'FvLvI':function(_0x3b7513,_0x20365b){return _0x3b7513>_0x20365b;},'ngolR':_0x13634e(0x1c4),'lMabq':_0x13634e(0x101),'pUWpM':_0x13634e(0x27d),'eTutu':_0x13634e(0x242),'cQUpL':_0x13634e(0x283),'ztEQp':_0x13634e(0x28f),'xDTNC':_0x13634e(0x253),'ArQur':function(_0x1afa8a,_0x1a117d){return _0x1afa8a(_0x1a117d);},'VLBBM':function(_0x5dddee,_0x5b01f8){return _0x5dddee+_0x5b01f8;},'KXarh':_0x13634e(0x25e),'VFVTP':_0x13634e(0xc8),'zSRIR':_0x13634e(0x1bc),'HRnrF':_0x13634e(0x225)};try{const {id:_0x1405f6}=_0x13e2a8[_0x13634e(0x1cf)],_0x415bf4=await Ventas['findByPk'](_0x1405f6,{'include':[{'model':Detalle_Venta,'as':_0x3d8272[_0x13634e(0xf5)],'include':[{'model':Productos,'as':_0x13634e(0x13e)},{'model':Producto_Tallas,'as':_0x3d8272['lMabq']},{'model':Producto_Tamano_Insumos,'as':_0x13634e(0x150)},{'model':Servicios,'as':_0x3d8272[_0x13634e(0xea)]}]},{'model':Agendamientos,'as':_0x13634e(0x223),'required':![]},{'model':Empleados,'as':_0x3d8272[_0x13634e(0x17a)],'attributes':[_0x3d8272[_0x13634e(0x173)]]}]});if(!_0x415bf4)return _0x3d6a80['status'](0x194)[_0x13634e(0xe6)]({'status':_0x13634e(0x1bc),'message':_0x3d8272[_0x13634e(0x11e)]});const _0x58bb6d=_0x415bf4['toJSON'](),_0x22395c=_0x58bb6d[_0x13634e(0x1c4)]||[],_0x5e578e=_0x58bb6d[_0x13634e(0x223)]||null,_0x115e38=_0x58bb6d[_0x13634e(0x242)]||{};let _0x1a2809=_0x3d8272[_0x13634e(0x10f)];if(_0x58bb6d[_0x13634e(0xf4)]){const _0x4fa60c=await obtenerInfoEmpleado(_0x58bb6d[_0x13634e(0xf4)]);_0x1a2809=_0x4fa60c?.[_0x13634e(0x283)]||_0x13634e(0x253);}const _0x21e3b9=_0x22395c['map'](_0x4b26c1=>{const _0x22cddb=_0x13634e,_0x12a2a4={..._0x4b26c1};if(_0x4b26c1[_0x22cddb(0x17b)])try{_0x12a2a4['Tallas']=JSON[_0x22cddb(0xfe)](_0x4b26c1[_0x22cddb(0x17b)]);}catch(_0x3781b8){_0x12a2a4[_0x22cddb(0x234)]=[];}else _0x12a2a4[_0x22cddb(0x234)]=[];if(_0x4b26c1[_0x22cddb(0xf0)])try{_0x12a2a4['Tamanos']=JSON[_0x22cddb(0xfe)](_0x4b26c1[_0x22cddb(0xf0)]);}catch(_0x3043de){_0x12a2a4[_0x22cddb(0x1e5)]=[];}else _0x12a2a4[_0x22cddb(0x1e5)]=[];return _0x12a2a4[_0x22cddb(0x208)]=_0x12a2a4[_0x22cddb(0x234)]&&_0x3d8272[_0x22cddb(0x18f)](_0x12a2a4[_0x22cddb(0x234)][_0x22cddb(0x154)],0x0),_0x12a2a4[_0x22cddb(0x1aa)]=_0x12a2a4[_0x22cddb(0x1e5)]&&_0x3d8272[_0x22cddb(0x18f)](_0x12a2a4['Tamanos'][_0x22cddb(0x154)],0x0),_0x12a2a4['tieneTallas']&&(_0x12a2a4[_0x22cddb(0x13d)]=_0x12a2a4[_0x22cddb(0x234)][_0x22cddb(0x15f)](_0x33c956=>(_0x33c956[_0x22cddb(0x276)]||_0x33c956['Cantidad']||0x0)+_0x22cddb(0x274)+(_0x33c956[_0x22cddb(0x1c3)]||_0x33c956[_0x22cddb(0x203)]||_0x33c956[_0x22cddb(0x125)]||_0x22cddb(0x27a)))[_0x22cddb(0x1bb)](',\x20')),_0x12a2a4['tieneTamanos']&&(_0x12a2a4['descripcionTamanos']=_0x12a2a4[_0x22cddb(0x1e5)]['map'](_0xb158dc=>_0xb158dc[_0x22cddb(0x206)]+_0x22cddb(0x1ac)+_0xb158dc[_0x22cddb(0x125)])['join'](',\x20')),_0x12a2a4;}),_0x31972e=_0x21e3b9['reduce']((_0x172e07,_0x211661)=>_0x172e07+Number(_0x211661[_0x13634e(0x20f)]||0x0),0x0),_0x210a73=_0x5e578e?_0x3d8272[_0x13634e(0xe2)](Number,_0x5e578e[_0x13634e(0x20f)]||0x0):0x0,_0x2eedf4=_0x3d8272['VLBBM'](_0x31972e,_0x210a73),_0x1b9b7f=Number(_0x58bb6d[_0x13634e(0x19f)])===_0x2eedf4;_0x3d6a80[_0x13634e(0xe6)]({'status':_0x3d8272['KXarh'],'data':{'Id_Ventas':_0x58bb6d[_0x13634e(0x157)],'Id_Agendamientos':_0x58bb6d['Id_Agendamientos'],'Id_Cliente':_0x58bb6d[_0x13634e(0x28a)],'Id_Empleados':_0x58bb6d[_0x13634e(0xf4)],'Nombre_Empleado':_0x1a2809,'Fecha':_0x58bb6d['Fecha'],'Total':_0x58bb6d[_0x13634e(0x19f)],'M_Pago':_0x58bb6d['M_Pago'],'Referencia':_0x58bb6d[_0x13634e(0x214)],'Estado':_0x58bb6d[_0x13634e(0x270)],'Detalle_Venta':_0x21e3b9,'tieneAgendamiento':!!_0x58bb6d[_0x13634e(0x172)],'Agendamiento':_0x5e578e,'totalValidado':_0x1b9b7f}});}catch(_0x276ffe){console[_0x13634e(0x1bc)](_0x3d8272['VFVTP'],_0x276ffe),_0x3d6a80['status'](0x1f4)[_0x13634e(0xe6)]({'status':_0x3d8272[_0x13634e(0x14c)],'message':_0x3d8272[_0x13634e(0x189)]});}},exports[a0_0x15b2bd(0xdc)]=async(_0x65631c,_0x27f895)=>{const _0x39176c=a0_0x15b2bd,_0x3e2652={'qstfw':function(_0xd26132,_0x2ff138){return _0xd26132===_0x2ff138;},'iHAwR':_0x39176c(0x240),'DBtrz':'===\x20DEBUG:\x20Datos\x20recibidos\x20para\x20crear\x20venta\x20===','hAEIw':'Body\x20completo:','GfAqh':'===\x20DEBUG:\x20Datos\x20extraídos\x20===','htgmn':_0x39176c(0x224),'RPUgO':_0x39176c(0x265),'miQIM':_0x39176c(0x1a6),'bvJgV':_0x39176c(0x148),'IYSVX':function(_0x18c9b7,_0x185ae9){return _0x18c9b7||_0x185ae9;},'KEkMs':_0x39176c(0x1bc),'xsuXI':_0x39176c(0x213),'Uzrtm':function(_0x4d08ad,_0x3703c3,_0x2a1d52){return _0x4d08ad(_0x3703c3,_0x2a1d52);},'dFbmh':function(_0x40e2e5,_0x5de4b5,_0x2db22c){return _0x40e2e5(_0x5de4b5,_0x2db22c);},'gnUEv':'Agendamiento\x20no\x20encontrado','aiLvi':function(_0x1ea584,_0x3003de){return _0x1ea584(_0x3003de);},'okXph':'Id_Productos','CIdWZ':_0x39176c(0x116),'QSkeQ':function(_0x30c5d0,_0x31a2b6){return _0x30c5d0===_0x31a2b6;},'yPFxp':_0x39176c(0xce),'jauKX':_0x39176c(0xfd),'lDzsT':_0x39176c(0xc2),'AWRQO':_0x39176c(0x119),'owEyP':function(_0xea3ac1,_0x1ccbe8){return _0xea3ac1>_0x1ccbe8;},'hrwUK':'Id_Insumos_Insumo','lyNVL':function(_0x4ec171,_0x3292ed){return _0x4ec171*_0x3292ed;},'rRbvr':function(_0xf12675,_0x5d62ac){return _0xf12675(_0x5d62ac);},'ahaik':function(_0x98c75,_0x5d3907){return _0x98c75*_0x5d3907;},'KRTvL':'===\x20DEBUG:\x20Procesando\x20talla\x20===','HIagi':_0x39176c(0x15d),'OuxAd':_0x39176c(0x21a),'TAMDp':_0x39176c(0x12e),'wdIEU':'Id_Tallas_Talla','vsEDp':_0x39176c(0x18d),'GPeVg':'Nombre','GmJnm':'Tallas\x20configuradas\x20para\x20el\x20producto:','QCbPF':_0x39176c(0x1a8),'mxVnG':_0x39176c(0x1da),'zrklO':_0x39176c(0x1f2),'TgJxa':_0x39176c(0x160),'OKxLN':_0x39176c(0x122),'OzpLY':_0x39176c(0x1e4),'LTRqP':function(_0x3b0dba,_0x35f769){return _0x3b0dba>=_0x35f769;},'CifFH':_0x39176c(0x1a9),'QTJPG':function(_0x34b1b5,_0x6d3aaa){return _0x34b1b5(_0x6d3aaa);},'VdNqv':function(_0x536432,_0x1a4ac2){return _0x536432<_0x1a4ac2;},'ylUfs':function(_0x291089,_0x238983){return _0x291089(_0x238983);},'egsOE':function(_0xc9ae27,_0x41352d){return _0xc9ae27(_0x41352d);},'bsLcg':function(_0x47ee6e,_0x362c1d){return _0x47ee6e===_0x362c1d;},'cpsHX':function(_0xe0d49a,_0x104373,_0x20afaa,_0x1aec39,_0x5c9c03,_0x10e4b9){return _0xe0d49a(_0x104373,_0x20afaa,_0x1aec39,_0x5c9c03,_0x10e4b9);},'ishcT':function(_0x1faa39,_0xee6a7){return _0x1faa39+_0xee6a7;},'GSiBg':function(_0x14d7fb,_0x188e85){return _0x14d7fb===_0x188e85;},'UNjDg':function(_0x9a0a5e,_0x522583){return _0x9a0a5e>_0x522583;},'AFpnS':function(_0x2d8d2b,_0xf79bce){return _0x2d8d2b>_0xf79bce;},'LEHbl':function(_0x4c0212,_0x971676){return _0x4c0212>_0x971676;},'zoiXF':function(_0x5df39,_0x5aa254){return _0x5df39>_0x5aa254;},'NdRzo':function(_0x402f13,_0x43151d,_0x2e6230,_0x545159){return _0x402f13(_0x43151d,_0x2e6230,_0x545159);},'RCqTH':function(_0x5b05d2,_0x274fcd){return _0x5b05d2>_0x274fcd;},'NsNHy':function(_0x55df19,_0x559051,_0x2fdc45,_0x4e27bd){return _0x55df19(_0x559051,_0x2fdc45,_0x4e27bd);},'oEDNn':_0x39176c(0x25e),'bsCdF':_0x39176c(0x14b),'vgmrF':'Error\x20al\x20crear\x20venta:','Pyvst':'no\x20encontrado','TGthF':_0x39176c(0x1ea),'bsPnN':_0x39176c(0x20b),'QpUic':function(_0x4bd0cd,_0x5169bf){return _0x4bd0cd instanceof _0x5169bf;},'aSslk':'Duplicado\x20en\x20campo\x20único','cFIhO':_0x39176c(0x202),'BlXmJ':function(_0x5a29f4,_0xf12af4){return _0x5a29f4 instanceof _0xf12af4;},'nqgHh':_0x39176c(0x10b),'FqLnR':'Error\x20inesperado\x20al\x20crear\x20venta'},_0x396c79=await sequelize[_0x39176c(0x107)]();try{console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x186)]),console['log'](_0x3e2652[_0x39176c(0x1fa)],JSON[_0x39176c(0x164)](_0x65631c[_0x39176c(0x140)],null,0x2));const {Id_Agendamientos:_0x5f54dd,Id_Cliente:_0x44913a,Id_Empleados:_0x37cc6e,Fecha:_0x5ebe1d,M_Pago:_0x1a91ec,Referencia:_0x21afcb,Estado:Estado=0x3,Detalle_Venta:_0x285928=[]}=_0x65631c[_0x39176c(0x140)];console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x201)]),console[_0x39176c(0x26b)](_0x3e2652['htgmn'],_0x44913a),console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x1af)],_0x37cc6e),console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x1bf)],_0x5ebe1d),console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0xf3)],_0x1a91ec),console[_0x39176c(0x26b)](_0x39176c(0x28b),JSON[_0x39176c(0x164)](_0x285928,null,0x2));if(_0x3e2652['IYSVX'](!_0x44913a,!_0x37cc6e)||!_0x5ebe1d||!_0x1a91ec||_0x285928[_0x39176c(0x154)]===0x0)return await _0x396c79['rollback'](),_0x27f895[_0x39176c(0x1d7)](0x190)['json']({'status':_0x3e2652['KEkMs'],'message':_0x3e2652[_0x39176c(0x153)],'required':{'Id_Cliente':_0x44913a,'Id_Empleados':_0x37cc6e,'Fecha':_0x5ebe1d,'M_Pago':_0x1a91ec,'Detalles':_0x285928[_0x39176c(0x154)]}});await _0x3e2652['Uzrtm'](validarCliente,_0x44913a,_0x396c79),await _0x3e2652[_0x39176c(0x25d)](validarEmpleado,_0x37cc6e,_0x396c79),validarMetodoPago(_0x1a91ec,_0x21afcb);let _0x5b970b=0x0;if(_0x5f54dd){const _0x3aa6db=await Agendamientos['findByPk'](_0x5f54dd,{'transaction':_0x396c79});if(!_0x3aa6db)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895[_0x39176c(0x1d7)](0x190)['json']({'status':_0x3e2652['KEkMs'],'message':_0x3e2652[_0x39176c(0x147)]});_0x5b970b=_0x3e2652[_0x39176c(0x16c)](Number,_0x3aa6db[_0x39176c(0x20f)]||0x0);}let _0x2b3b12=0x0;const _0x2202db=[];for(const _0x4e35d9 of _0x285928){const _0x454de8=await Productos[_0x39176c(0x17d)](_0x4e35d9[_0x39176c(0xf1)],{'transaction':_0x396c79,'attributes':[_0x3e2652[_0x39176c(0x1e7)],'Nombre',_0x39176c(0x120),_0x3e2652[_0x39176c(0x185)]]});if(!_0x454de8)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':'Producto\x20con\x20ID\x20'+_0x4e35d9['Id_Productos']+_0x39176c(0xcf)});let _0xa02732=_0x4e35d9['Tallas']||[],_0x59b166=_0x4e35d9[_0x39176c(0x1e5)]||[];if(_0x4e35d9[_0x39176c(0xf0)]&&_0x3e2652[_0x39176c(0x135)](typeof _0x4e35d9[_0x39176c(0xf0)],_0x3e2652[_0x39176c(0x145)]))try{_0x59b166=JSON[_0x39176c(0xfe)](_0x4e35d9[_0x39176c(0xf0)]);}catch(_0x56dbfc){_0x59b166=[];}else _0x4e35d9[_0x39176c(0xf0)]&&Array[_0x39176c(0xb6)](_0x4e35d9[_0x39176c(0xf0)])&&(_0x59b166=_0x4e35d9[_0x39176c(0xf0)]);if(_0x4e35d9[_0x39176c(0x17b)]&&typeof _0x4e35d9['Tallas_Data']===_0x3e2652[_0x39176c(0x145)])try{_0xa02732=JSON['parse'](_0x4e35d9[_0x39176c(0x17b)]);}catch(_0x455c1e){_0xa02732=[];}else _0x4e35d9[_0x39176c(0x17b)]&&Array[_0x39176c(0xb6)](_0x4e35d9[_0x39176c(0x17b)])&&(_0xa02732=_0x4e35d9[_0x39176c(0x17b)]);try{console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x20c)],_0x454de8['Nombre'],_0x3e2652[_0x39176c(0x1cc)]),console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0x272)],JSON[_0x39176c(0x164)](_0xa02732,null,0x2)),console['log'](_0x3e2652[_0x39176c(0x12b)],JSON[_0x39176c(0x164)](_0x59b166,null,0x2));if(_0x59b166&&_0x3e2652[_0x39176c(0x22e)](_0x59b166['length'],0x0))for(const _0x3888fe of _0x59b166){const _0x37cdb8=_0x3888fe[_0x39176c(0x125)]||_0x3888fe[_0x39176c(0x283)]||'';if(!_0x37cdb8)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)['json']({'status':_0x3e2652[_0x39176c(0x1ae)],'message':'Nombre\x20de\x20tamaño\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x454de8[_0x39176c(0x283)]});const _0x1b17ac=await Tamano[_0x39176c(0xe5)]({'where':{'Nombre':_0x37cdb8},'transaction':_0x396c79});if(!_0x1b17ac)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x39176c(0x1bc),'message':'Tamaño\x20'+_0x37cdb8+_0x39176c(0xcf)});const _0x24b0ed=await Producto_Tamano[_0x39176c(0xe5)]({'where':{'Id_Productos':_0x4e35d9[_0x39176c(0xf1)],'Id_Tamano':_0x1b17ac[_0x39176c(0x1ed)]},'transaction':_0x396c79});if(!_0x24b0ed)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':'error','message':_0x39176c(0x207)+_0x454de8[_0x39176c(0x283)]+_0x39176c(0x199)+_0x37cdb8+_0x39176c(0x1ec)});const _0x580793=await Producto_Tamano_Insumos['findAll']({'where':{'Id_Producto_Tamano':_0x24b0ed[_0x39176c(0xd4)]},'include':[{'model':Insumos,'as':_0x3e2652[_0x39176c(0x1eb)]}],'transaction':_0x396c79}),_0x4dbb16=await Tamano_Insumos[_0x39176c(0xeb)]({'where':{'Id_Tamano':_0x1b17ac[_0x39176c(0x1ed)]},'include':[{'model':Insumos,'as':_0x3e2652[_0x39176c(0x1eb)]}],'transaction':_0x396c79}),_0x5c63ed=Number(_0x3888fe[_0x39176c(0x206)]||_0x3888fe[_0x39176c(0x276)]||0x0),_0x377682=new Map();for(const _0x24c518 of _0x580793){const _0x269842=_0x24c518['Id_Insumos_Insumo'],_0x15474c=_0x3e2652[_0x39176c(0x16c)](Number,_0x24c518[_0x39176c(0x23f)]||0x0),_0x10698d=_0x3e2652[_0x39176c(0x1a2)](_0x15474c,_0x5c63ed),_0x25f8af=_0x3e2652[_0x39176c(0x1d6)](Number,_0x269842[_0x39176c(0x116)]||0x0);if(_0x25f8af<_0x10698d)return await _0x396c79['rollback'](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x39176c(0x166)+_0x269842[_0x39176c(0x283)]+'.\x20Disponible:\x20'+_0x25f8af+',\x20Necesario:\x20'+_0x10698d});_0x377682[_0x39176c(0x1fc)](_0x269842[_0x39176c(0x1fb)],!![]);}for(const _0x1e0872 of _0x4dbb16){const _0x1628e7=_0x1e0872['Id_Insumos_Insumo'];if(_0x377682[_0x39176c(0x278)](_0x1628e7[_0x39176c(0x1fb)]))continue;const _0x597258=_0x3e2652[_0x39176c(0x1d6)](Number,_0x1e0872['Cantidad']||0x0),_0x3fa30d=_0x3e2652[_0x39176c(0xff)](_0x597258,_0x5c63ed),_0x126622=_0x3e2652[_0x39176c(0x16c)](Number,_0x1628e7[_0x39176c(0x116)]||0x0);if(_0x126622<_0x3fa30d)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652['KEkMs'],'message':_0x39176c(0x167)+_0x1628e7[_0x39176c(0x283)]+'.\x20Disponible:\x20'+_0x126622+_0x39176c(0x1c8)+_0x3fa30d});}}else{if(_0xa02732&&_0x3e2652[_0x39176c(0x22e)](_0xa02732['length'],0x0)){let _0x27a51a=0x0;for(const _0x3b87d3 of _0xa02732){const _0x5c95e6=_0x3b87d3[_0x39176c(0x1c3)]||_0x3b87d3[_0x39176c(0x203)]||_0x3b87d3['nombre']||'',_0x2abfbd=Number(_0x3b87d3[_0x39176c(0x276)]||_0x3b87d3['Cantidad']||0x0);console[_0x39176c(0x26b)](_0x3e2652['KRTvL']),console[_0x39176c(0x26b)](_0x3e2652['HIagi'],JSON[_0x39176c(0x164)](_0x3b87d3,null,0x2)),console[_0x39176c(0x26b)](_0x3e2652['OuxAd'],_0x5c95e6),console['log'](_0x39176c(0x14a),_0x2abfbd);if(!_0x5c95e6)return console[_0x39176c(0x26b)](_0x39176c(0x162)),await _0x396c79['rollback'](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':'Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x454de8[_0x39176c(0x283)]});console[_0x39176c(0x26b)](_0x3e2652['TAMDp']);const _0x3f3567=await Producto_Tallas['findAll']({'where':{'Id_Productos':_0x4e35d9[_0x39176c(0xf1)]},'include':[{'model':Tallas,'as':_0x3e2652['wdIEU'],'attributes':[_0x3e2652['vsEDp'],_0x3e2652[_0x39176c(0x1fd)]]}],'transaction':_0x396c79});console['log'](_0x3e2652[_0x39176c(0x100)],_0x3f3567[_0x39176c(0x15f)](_0x28d050=>({'Id_Tallas':_0x28d050['Id_Tallas'],'Nombre':_0x28d050[_0x39176c(0x176)]?.[_0x39176c(0x283)]||_0x39176c(0x13b),'Stock':_0x28d050[_0x39176c(0x116)]})));const _0x23f5c3=_0x3f3567['find'](_0x40f152=>_0x40f152['Id_Tallas_Talla']?.[_0x39176c(0x283)]===_0x5c95e6);let _0x3d49bf;if(_0x23f5c3)_0x3d49bf=_0x23f5c3,console['log'](_0x3e2652[_0x39176c(0x105)],_0x23f5c3['Id_Tallas_Talla']?.[_0x39176c(0x283)]),console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0xb9)],_0x23f5c3[_0x39176c(0x116)]),console[_0x39176c(0x26b)](_0x3e2652['zrklO'],_0x23f5c3['Id_Tallas']);else return console[_0x39176c(0x26b)](_0x3e2652[_0x39176c(0xdd)]),await _0x396c79['rollback'](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x39176c(0x26a)+_0x5c95e6+_0x39176c(0x1ce)+_0x454de8[_0x39176c(0x283)]+_0x39176c(0x204)+_0x3f3567[_0x39176c(0x15f)](_0x122811=>_0x122811['Id_Tallas_Talla']?.[_0x39176c(0x283)]||'N/A')[_0x39176c(0x1bb)](',\x20')});if(!_0x3d49bf)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652['KEkMs'],'message':_0x39176c(0x26a)+_0x5c95e6+_0x39176c(0x1ce)+_0x454de8[_0x39176c(0x283)]});const _0x4450fd=Number(_0x3d49bf[_0x39176c(0x116)]||0x0);console[_0x39176c(0x26b)](_0x3e2652['OKxLN']),console[_0x39176c(0x26b)](_0x3e2652['OzpLY'],_0x4450fd),console[_0x39176c(0x26b)](_0x39176c(0x14a),_0x2abfbd),console['log'](_0x39176c(0x16e),_0x3e2652[_0x39176c(0x193)](_0x4450fd,_0x2abfbd));if(_0x4450fd<_0x2abfbd)return console['log'](_0x3e2652[_0x39176c(0x27f)]),await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x39176c(0xd1)+_0x5c95e6+'\x20del\x20producto\x20'+_0x454de8['Nombre']+'.\x20Disponible:\x20'+_0x4450fd+',\x20Solicitado:\x20'+_0x2abfbd});_0x27a51a+=_0x2abfbd;}const _0x51e8c8=_0x3e2652[_0x39176c(0x228)](Number,_0x454de8[_0x39176c(0x116)]||0x0);if(_0x3e2652[_0x39176c(0x18a)](_0x51e8c8,_0x27a51a))return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x39176c(0x1e2)+_0x454de8[_0x39176c(0x283)]+'.\x20Disponible:\x20'+_0x51e8c8+_0x39176c(0xd5)+_0x27a51a});}else{const _0x143558=await Producto_Tallas[_0x39176c(0xeb)]({'where':{'Id_Productos':_0x4e35d9['Id_Productos']},'include':[{'model':Tallas,'as':_0x3e2652['wdIEU'],'attributes':[_0x3e2652[_0x39176c(0x219)],'Nombre']}],'transaction':_0x396c79});if(_0x143558&&_0x143558[_0x39176c(0x154)]>0x0)return await _0x396c79[_0x39176c(0x17e)](),_0x27f895[_0x39176c(0x1d7)](0x190)['json']({'status':_0x39176c(0x1bc),'message':_0x39176c(0x207)+_0x454de8[_0x39176c(0x283)]+_0x39176c(0x16b)+_0x143558[_0x39176c(0x15f)](_0x41cdb0=>_0x41cdb0[_0x39176c(0x176)]?.['Nombre']||_0x39176c(0x27a))[_0x39176c(0x1bb)](',\x20')});const _0x5a8e11=_0x3e2652[_0x39176c(0x271)](Number,_0x454de8['Stock']||0x0),_0x1b3212=_0x3e2652['egsOE'](Number,_0x4e35d9[_0x39176c(0x206)]||0x0);if(_0x3e2652[_0x39176c(0x18a)](_0x5a8e11,_0x1b3212))return await _0x396c79[_0x39176c(0x17e)](),_0x27f895[_0x39176c(0x1d7)](0x190)['json']({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x39176c(0x118)+_0x454de8[_0x39176c(0x283)]+_0x39176c(0xde)+_0x5a8e11+_0x39176c(0xd5)+_0x1b3212});}}}catch(_0xf72ce9){return await _0x396c79[_0x39176c(0x17e)](),_0x27f895['status'](0x190)['json']({'status':_0x3e2652[_0x39176c(0x1ae)],'message':'Error\x20al\x20validar\x20stock:\x20'+_0xf72ce9[_0x39176c(0xb4)]});}if(_0x4e35d9['Tamanos_Data']&&_0x3e2652[_0x39176c(0x135)](typeof _0x4e35d9[_0x39176c(0xf0)],_0x3e2652[_0x39176c(0x145)]))try{_0x59b166=JSON[_0x39176c(0xfe)](_0x4e35d9[_0x39176c(0xf0)]);}catch(_0x584c25){_0x59b166=[];}else _0x4e35d9['Tamanos_Data']&&Array[_0x39176c(0xb6)](_0x4e35d9[_0x39176c(0xf0)])&&(_0x59b166=_0x4e35d9[_0x39176c(0xf0)]);if(_0x4e35d9['Tallas_Data']&&_0x3e2652[_0x39176c(0x1f6)](typeof _0x4e35d9['Tallas_Data'],_0x3e2652[_0x39176c(0x145)]))try{_0xa02732=JSON[_0x39176c(0xfe)](_0x4e35d9['Tallas_Data']);}catch(_0x37c2f6){_0xa02732=[];}else _0x4e35d9['Tallas_Data']&&Array['isArray'](_0x4e35d9[_0x39176c(0x17b)])&&(_0xa02732=_0x4e35d9[_0x39176c(0x17b)]);_0xa02732&&_0x3e2652[_0x39176c(0x22e)](_0xa02732['length'],0x0)&&(_0xa02732=_0xa02732[_0x39176c(0x15f)](_0x57a295=>{const _0x2e35d3=_0x39176c;if(_0x3e2652[_0x2e35d3(0x275)](typeof _0x57a295,_0x3e2652[_0x2e35d3(0x145)]))return{'talla':_0x57a295,'cantidad':0x1,'precio':0x0};return{'talla':_0x57a295[_0x2e35d3(0x1c3)]||_0x57a295[_0x2e35d3(0x203)]||_0x57a295[_0x2e35d3(0x125)]||'','cantidad':_0x57a295[_0x2e35d3(0x276)]||_0x57a295[_0x2e35d3(0x206)]||0x1,'precio':_0x57a295[_0x2e35d3(0x178)]||_0x57a295[_0x2e35d3(0x194)]||0x0,'Id_Producto_Tallas':_0x57a295[_0x2e35d3(0xc5)]||null};})[_0x39176c(0x128)](_0x413cb7=>_0x413cb7[_0x39176c(0x1c3)]&&_0x413cb7[_0x39176c(0x1c3)][_0x39176c(0x26e)]()!==''));const _0x4d6cc0=await _0x3e2652[_0x39176c(0xcd)](calcularPrecio,_0x454de8,_0xa02732,_0x59b166,_0x4e35d9['Cantidad'],_0x396c79),_0x55e851=_0x4d6cc0;_0x2202db['push']({..._0x4e35d9,'Precio':_0x4d6cc0,'Subtotal':_0x55e851,'Tallas':_0xa02732,'Tamanos':_0x59b166,'Tallas_Original':_0x4e35d9[_0x39176c(0x234)]||[],'Tamanos_Original':_0x4e35d9[_0x39176c(0x1e5)]||[],'Tallas_Data_Original':_0x4e35d9['Tallas_Data'],'Tamanos_Data_Original':_0x4e35d9[_0x39176c(0xf0)]}),_0x2b3b12+=_0x55e851;}const _0x389704=_0x3e2652['ishcT'](_0x2b3b12,_0x5b970b),_0x36fc36=await Ventas[_0x39176c(0x26f)]({'Id_Agendamientos':_0x3e2652[_0x39176c(0xbf)](_0x5f54dd,null),'Id_Cliente':_0x44913a,'Id_Empleados':_0x37cc6e,'Fecha':_0x5ebe1d,'Total':_0x389704,'Estado':Estado,'M_Pago':_0x1a91ec,'Referencia':_0x3e2652[_0x39176c(0xbf)](_0x21afcb,null)},{'transaction':_0x396c79});for(const _0x3ab894 of _0x2202db){let _0x1b0641=[],_0x36e76d=[];if(_0x3ab894[_0x39176c(0x24c)]&&_0x3e2652[_0x39176c(0x1f6)](typeof _0x3ab894[_0x39176c(0x24c)],_0x3e2652['iHAwR']))try{_0x1b0641=JSON[_0x39176c(0xfe)](_0x3ab894[_0x39176c(0x24c)]);}catch(_0x993474){_0x1b0641=_0x3ab894[_0x39176c(0xf6)]||[];}else _0x3ab894[_0x39176c(0xf6)]&&_0x3e2652[_0x39176c(0x22e)](_0x3ab894[_0x39176c(0xf6)][_0x39176c(0x154)],0x0)?_0x1b0641=_0x3ab894[_0x39176c(0xf6)]:_0x1b0641=_0x3ab894['Tallas']||[];if(_0x3ab894[_0x39176c(0x1ad)]&&_0x3e2652['GSiBg'](typeof _0x3ab894[_0x39176c(0x1ad)],_0x3e2652[_0x39176c(0x145)]))try{_0x36e76d=JSON[_0x39176c(0xfe)](_0x3ab894[_0x39176c(0x1ad)]);}catch(_0x435482){_0x36e76d=_0x3ab894[_0x39176c(0x175)]||[];}else _0x3ab894['Tamanos_Original']&&_0x3e2652['UNjDg'](_0x3ab894[_0x39176c(0x175)][_0x39176c(0x154)],0x0)?_0x36e76d=_0x3ab894['Tamanos_Original']:_0x36e76d=_0x3ab894['Tamanos']||[];_0x36e76d&&_0x3e2652['owEyP'](_0x36e76d[_0x39176c(0x154)],0x0)&&(_0x36e76d=_0x36e76d[_0x39176c(0x15f)](_0x4bb71c=>({..._0x4bb71c,'PrecioTotal':Number(_0x4bb71c[_0x39176c(0xb5)]||0x0)})));_0x1b0641&&_0x3e2652[_0x39176c(0x126)](_0x1b0641[_0x39176c(0x154)],0x0)&&(_0x1b0641=_0x1b0641[_0x39176c(0x15f)](_0x303d60=>{const _0x18d452=_0x39176c,_0x2dd2f2={..._0x303d60,'talla':_0x303d60[_0x18d452(0x1c3)]||_0x303d60[_0x18d452(0x203)]||_0x303d60[_0x18d452(0x125)]||'','cantidad':_0x303d60[_0x18d452(0x276)]||_0x303d60[_0x18d452(0x206)]||0x0,'precio':_0x303d60[_0x18d452(0x178)]||_0x303d60['Precio']||0x0,'descripcion':_0x303d60['descripcion']||(_0x303d60[_0x18d452(0x276)]||_0x303d60['Cantidad']||0x0)+_0x18d452(0x274)+(_0x303d60[_0x18d452(0x1c3)]||_0x303d60[_0x18d452(0x203)]||_0x303d60['nombre']||''),'detalleTalla':_0x303d60[_0x18d452(0x26c)]||_0x18d452(0x26a)+(_0x303d60[_0x18d452(0x1c3)]||_0x303d60['Talla']||_0x303d60[_0x18d452(0x125)]||'')+':\x20'+(_0x303d60[_0x18d452(0x276)]||_0x303d60[_0x18d452(0x206)]||0x0)+_0x18d452(0x1f0)};return delete _0x2dd2f2['Cantidad'],delete _0x2dd2f2[_0x18d452(0x203)],delete _0x2dd2f2[_0x18d452(0x194)],_0x2dd2f2;})[_0x39176c(0x128)](_0x20c9d1=>_0x20c9d1[_0x39176c(0x1c3)]&&_0x20c9d1['talla'][_0x39176c(0x26e)]()!==''));const _0x604c06=_0x1b0641&&_0x3e2652[_0x39176c(0x177)](_0x1b0641[_0x39176c(0x154)],0x0)?JSON[_0x39176c(0x164)](_0x1b0641):null,_0xd5a1da=_0x36e76d&&_0x3e2652['AFpnS'](_0x36e76d[_0x39176c(0x154)],0x0)?JSON[_0x39176c(0x164)](_0x36e76d):null,_0x282bdd={'Id_Ventas':_0x36fc36['Id_Ventas'],'Id_Productos':_0x3ab894[_0x39176c(0xf1)]||null,'Id_Servicios':_0x3ab894[_0x39176c(0xc0)]||null,'Id_Producto_Tallas':_0x1b0641[_0x39176c(0x154)]>0x0?_0x1b0641[0x0][_0x39176c(0xc5)]:null,'Id_Producto_Tamano_Insumos':_0x3e2652[_0x39176c(0x126)](_0x36e76d['length'],0x0)?_0x36e76d[0x0][_0x39176c(0x161)]:null,'Cantidad':_0x3ab894[_0x39176c(0x206)],'Precio':_0x3ab894[_0x39176c(0x194)],'Subtotal':_0x3ab894[_0x39176c(0x20f)]};if(_0x604c06)_0x282bdd[_0x39176c(0x17b)]=_0x604c06;if(_0xd5a1da)_0x282bdd['Tamanos_Data']=_0xd5a1da;const _0xac6df=await Detalle_Venta[_0x39176c(0x26f)](_0x282bdd,{'transaction':_0x396c79});}for(const _0x3e2550 of _0x2202db){const _0x4bdad4=_0x3e2550[_0x39176c(0x234)]||[],_0x50e94=_0x3e2550[_0x39176c(0x1e5)]||[];try{if(_0x50e94&&_0x3e2652['zoiXF'](_0x50e94['length'],0x0))await _0x3e2652[_0x39176c(0x139)](actualizarStockInsumos,_0x3e2550[_0x39176c(0xf1)],_0x50e94,_0x396c79);else _0x4bdad4&&_0x3e2652['RCqTH'](_0x4bdad4[_0x39176c(0x154)],0x0)?await _0x3e2652['NdRzo'](actualizarStockTallas,_0x3e2550[_0x39176c(0xf1)],_0x4bdad4,_0x396c79):await _0x3e2652[_0x39176c(0xcc)](actualizarStockProducto,_0x3e2550['Id_Productos'],_0x3e2550[_0x39176c(0x206)],_0x396c79);}catch(_0x44dabf){return await _0x396c79['rollback'](),_0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':'error','message':_0x39176c(0x188)+_0x44dabf[_0x39176c(0xb4)]});}}await _0x396c79[_0x39176c(0xf8)](),_0x27f895[_0x39176c(0x1d7)](0xc9)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x22c)],'message':_0x3e2652['bsCdF'],'data':{'Id_Ventas':_0x36fc36[_0x39176c(0x157)],'Total':_0x389704,'totalValidado':!![],'Detalle_Venta':_0x2202db}});}catch(_0x3d9f4d){await _0x396c79[_0x39176c(0x17e)](),console['error'](_0x3e2652[_0x39176c(0x197)],_0x3d9f4d);if(_0x3d9f4d[_0x39176c(0xb4)][_0x39176c(0x1dc)](_0x3e2652[_0x39176c(0x12d)])||_0x3d9f4d['message'][_0x39176c(0x1dc)](_0x3e2652[_0x39176c(0xfb)])||_0x3d9f4d['message'][_0x39176c(0x1dc)](_0x39176c(0x263))||_0x3d9f4d[_0x39176c(0xb4)][_0x39176c(0x1dc)](_0x3e2652['bsPnN']))return _0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x3d9f4d['message']});if(_0x3e2652[_0x39176c(0x1bd)](_0x3d9f4d,UniqueConstraintError))return _0x27f895[_0x39176c(0x1d7)](0x199)[_0x39176c(0xe6)]({'status':_0x3e2652['KEkMs'],'message':_0x39176c(0x10d),'detail':_0x3e2652['aSslk']});if(_0x3e2652[_0x39176c(0x1bd)](_0x3d9f4d,ValidationError))return _0x27f895[_0x39176c(0x1d7)](0x190)[_0x39176c(0xe6)]({'status':_0x39176c(0x1bc),'message':_0x3e2652[_0x39176c(0x187)],'detail':_0x3d9f4d[_0x39176c(0x239)][_0x39176c(0x15f)](_0x5806ee=>_0x5806ee[_0x39176c(0xb4)])});if(_0x3e2652[_0x39176c(0x1f4)](_0x3d9f4d,DatabaseError))return _0x27f895[_0x39176c(0x1d7)](0x1f4)[_0x39176c(0xe6)]({'status':_0x3e2652[_0x39176c(0x1ae)],'message':_0x3e2652['nqgHh'],'detail':_0x3d9f4d['message']});return _0x27f895[_0x39176c(0x1d7)](0x1f4)[_0x39176c(0xe6)]({'status':_0x39176c(0x1bc),'message':_0x3e2652[_0x39176c(0x152)],'detail':_0x3d9f4d[_0x39176c(0xb4)]});}},exports[a0_0x15b2bd(0x179)]=async(_0x5ed1ac,_0x10b602)=>{const _0xe95054=a0_0x15b2bd,_0x44f00f={'uuAdR':_0xe95054(0x1c4),'ILkaz':_0xe95054(0x1bc),'oUXhy':_0xe95054(0x28f),'kxymg':function(_0x123bde,_0x1915bb){return _0x123bde!==_0x1915bb;},'WnEDQ':_0xe95054(0x257),'KgQkY':_0xe95054(0x250),'oEazr':function(_0x4c2717,_0x47e734){return _0x4c2717===_0x47e734;},'FtyqH':_0xe95054(0x151)},_0x31baec=await sequelize[_0xe95054(0x107)]();try{const {id:_0x444711}=_0x5ed1ac[_0xe95054(0x1cf)],_0x164eec=await Ventas[_0xe95054(0x17d)](_0x444711,{'include':[{'model':Detalle_Venta,'as':_0x44f00f['uuAdR']}],'transaction':_0x31baec});if(!_0x164eec)return await _0x31baec['rollback'](),_0x10b602[_0xe95054(0x1d7)](0x194)[_0xe95054(0xe6)]({'status':_0x44f00f[_0xe95054(0x245)],'message':_0x44f00f['oUXhy']});if(_0x44f00f[_0xe95054(0x241)](_0x164eec['Estado'],0x3))return await _0x31baec[_0xe95054(0x17e)](),_0x10b602[_0xe95054(0x1d7)](0x190)[_0xe95054(0xe6)]({'status':_0x44f00f[_0xe95054(0x245)],'message':_0x44f00f[_0xe95054(0x15a)]});await _0x164eec['update']({'Estado':0x1,'Fecha_Completado':new Date()},{'transaction':_0x31baec}),await _0x31baec[_0xe95054(0xf8)](),_0x10b602[_0xe95054(0xe6)]({'status':_0xe95054(0x25e),'message':_0x44f00f[_0xe95054(0xfa)],'data':{'Id_Ventas':_0x164eec[_0xe95054(0x157)],'Estado':_0x164eec[_0xe95054(0x270)],'EstadoDescripcion':'Completada','Fecha_Completado':_0x164eec[_0xe95054(0x11a)]}});}catch(_0x1b5b40){await _0x31baec['rollback'](),console['error'](_0xe95054(0x1f9),_0x1b5b40),_0x10b602[_0xe95054(0x1d7)](0x1f4)[_0xe95054(0xe6)]({'status':_0x44f00f[_0xe95054(0x245)],'message':_0x44f00f[_0xe95054(0x127)](process['env'][_0xe95054(0xbd)],'development')?_0xe95054(0x1b1)+_0x1b5b40['message']:_0x44f00f[_0xe95054(0xf2)]});}},exports['anularVenta']=async(_0x2e4e2a,_0x187d6e)=>{const _0x4c82a0=a0_0x15b2bd,_0x1a96f1={'bqiIp':_0x4c82a0(0x1c4),'PXodS':_0x4c82a0(0x1bc),'CqJEQ':function(_0x442f42,_0x264dff){return _0x442f42!==_0x264dff;},'AtItJ':_0x4c82a0(0x25e),'IPQis':_0x4c82a0(0x15c),'nJtdQ':_0x4c82a0(0x1ef),'eqsQP':'Error\x20al\x20anular\x20venta:','DIxkQ':'Error\x20al\x20anular\x20venta'},_0x4c8d71=await sequelize[_0x4c82a0(0x107)]();try{const {id:_0xac333f}=_0x2e4e2a[_0x4c82a0(0x1cf)],_0x2cff6d=await Ventas['findByPk'](_0xac333f,{'include':[{'model':Detalle_Venta,'as':_0x1a96f1[_0x4c82a0(0x170)]}],'transaction':_0x4c8d71});if(!_0x2cff6d)return await _0x4c8d71[_0x4c82a0(0x17e)](),_0x187d6e['status'](0x194)[_0x4c82a0(0xe6)]({'status':_0x1a96f1[_0x4c82a0(0x106)],'message':'Venta\x20no\x20encontrada'});if(_0x1a96f1['CqJEQ'](_0x2cff6d[_0x4c82a0(0x270)],0x3))return await _0x4c8d71[_0x4c82a0(0x17e)](),_0x187d6e[_0x4c82a0(0x1d7)](0x190)['json']({'status':_0x1a96f1[_0x4c82a0(0x106)],'message':_0x4c82a0(0x24f)});await _0x2cff6d['update']({'Estado':0x2,'Fecha_Anulacion':new Date()},{'transaction':_0x4c8d71}),await _0x4c8d71[_0x4c82a0(0xf8)](),_0x187d6e[_0x4c82a0(0xe6)]({'status':_0x1a96f1[_0x4c82a0(0xe7)],'message':_0x1a96f1['IPQis'],'data':{'Id_Ventas':_0x2cff6d[_0x4c82a0(0x157)],'Estado':_0x2cff6d['Estado'],'EstadoDescripcion':_0x1a96f1[_0x4c82a0(0xe8)],'Fecha_Anulacion':_0x2cff6d[_0x4c82a0(0x104)]}});}catch(_0x2a9e5f){await _0x4c8d71[_0x4c82a0(0x17e)](),console['error'](_0x1a96f1[_0x4c82a0(0x1cd)],_0x2a9e5f),_0x187d6e[_0x4c82a0(0x1d7)](0x1f4)[_0x4c82a0(0xe6)]({'status':_0x1a96f1[_0x4c82a0(0x106)],'message':process[_0x4c82a0(0x1ba)][_0x4c82a0(0xbd)]===_0x4c82a0(0x281)?_0x4c82a0(0x1d8)+_0x2a9e5f[_0x4c82a0(0xb4)]:_0x1a96f1[_0x4c82a0(0xe0)]});}},exports[a0_0x15b2bd(0x131)]=async(_0x9884e4,_0x2545e0)=>{const _0x427d12=a0_0x15b2bd,_0x3c72f9={'DWSUC':_0x427d12(0x1b4),'ozCus':_0x427d12(0x10e),'TlLSb':function(_0x585c48,_0x64e62e){return _0x585c48(_0x64e62e);},'sVoTc':function(_0x689e00,_0x16f8d9){return _0x689e00<_0x16f8d9;},'QdNyJ':_0x427d12(0x25e),'EctFL':_0x427d12(0x112),'hfrtO':_0x427d12(0x1bc),'MvKPu':_0x427d12(0x220)};try{const {Id_Productos:_0x2d687a,Cantidad:_0x39b879,Tallas:_0x3e3736,Tamanos:_0x48adab}=_0x9884e4['body'];if(!_0x2d687a)return _0x2545e0[_0x427d12(0x1d7)](0x190)[_0x427d12(0xe6)]({'status':_0x427d12(0x1bc),'message':_0x3c72f9[_0x427d12(0x24b)]});const _0x435e53=await Productos[_0x427d12(0x17d)](_0x2d687a);if(!_0x435e53)return _0x2545e0[_0x427d12(0x1d7)](0x194)[_0x427d12(0xe6)]({'status':_0x427d12(0x1bc),'message':_0x3c72f9[_0x427d12(0x19a)]});let _0x39f59=!![],_0x1c739e=[];if(_0x3e3736&&_0x3e3736[_0x427d12(0x154)]>0x0)for(const _0x20c301 of _0x3e3736){const _0xb8fb70=_0x20c301[_0x427d12(0x1c3)]||_0x20c301[_0x427d12(0x203)]||_0x20c301[_0x427d12(0x125)]||'',_0x2714d6=_0x3c72f9[_0x427d12(0x183)](Number,_0x20c301['cantidad']||_0x20c301[_0x427d12(0x206)]||0x0);if(!_0xb8fb70){_0x39f59=![],_0x1c739e[_0x427d12(0x132)]('Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x435e53[_0x427d12(0x283)]);continue;}const _0x46581a=await _0x3e3736[_0x427d12(0xe5)]({'where':{'Nombre':_0xb8fb70}});if(!_0x46581a){_0x39f59=![],_0x1c739e[_0x427d12(0x132)](_0x427d12(0x26a)+_0xb8fb70+_0x427d12(0x287));continue;}const _0x2e78c9=await Producto_Tallas[_0x427d12(0xe5)]({'where':{'Id_Productos':_0x435e53[_0x427d12(0xf1)],'Id_Tallas':_0x46581a['Id_Tallas']}});(!_0x2e78c9||_0x3c72f9[_0x427d12(0x130)](_0x2e78c9[_0x427d12(0x116)],_0x2714d6))&&(_0x39f59=![],_0x1c739e[_0x427d12(0x132)](_0x427d12(0xd1)+_0xb8fb70+':\x20disponible\x20'+(_0x2e78c9?.[_0x427d12(0x116)]||0x0)+_0x427d12(0xe1)+_0x2714d6));}if(_0x48adab&&_0x48adab[_0x427d12(0x154)]>0x0)for(const _0x43316b of _0x48adab){const _0x6f3149=_0x43316b[_0x427d12(0x125)]||_0x43316b['Nombre']||'';if(!_0x6f3149){_0x39f59=![],_0x1c739e[_0x427d12(0x132)](_0x427d12(0x191)+_0x435e53[_0x427d12(0x283)]);continue;}const _0x45a20a=await Tamano[_0x427d12(0xe5)]({'where':{'Nombre':_0x6f3149}});if(!_0x45a20a){_0x39f59=![],_0x1c739e[_0x427d12(0x132)](_0x427d12(0x156)+_0x6f3149+_0x427d12(0xcf));continue;}const _0x8cfe1=await Producto_Tamano[_0x427d12(0xe5)]({'where':{'Id_Productos':_0x435e53['Id_Productos'],'Id_Tamano':_0x45a20a[_0x427d12(0x1ed)]}});!_0x8cfe1&&(_0x39f59=![],_0x1c739e[_0x427d12(0x132)](_0x427d12(0x207)+_0x435e53[_0x427d12(0x283)]+_0x427d12(0x199)+_0x6f3149+_0x427d12(0x1ec)));}_0x2545e0[_0x427d12(0xe6)]({'status':_0x3c72f9['QdNyJ'],'data':{'Id_Productos':_0x435e53[_0x427d12(0xf1)],'Nombre':_0x435e53[_0x427d12(0x283)],'stockDisponible':_0x39f59,'mensajes':_0x1c739e}});}catch(_0x52a46c){console[_0x427d12(0x1bc)](_0x3c72f9['EctFL'],_0x52a46c),_0x2545e0[_0x427d12(0x1d7)](0x1f4)[_0x427d12(0xe6)]({'status':_0x3c72f9['hfrtO'],'message':_0x3c72f9[_0x427d12(0x260)]});}},exports[a0_0x15b2bd(0x244)]=async(_0x431f79,_0xcaef16)=>{const _0x1a65b2=a0_0x15b2bd,_0x10c267={'mVeaW':_0x1a65b2(0x192),'YwMVa':function(_0x4f54c3,_0xd1b293){return _0x4f54c3(_0xd1b293);},'KJlqL':'Id_Productos_Producto','AWGgm':_0x1a65b2(0x283),'yFsGR':_0x1a65b2(0x25e),'odbvJ':'Error\x20al\x20generar\x20reporte\x20diario:','lvHed':_0x1a65b2(0x1a4)};try{const {fecha:_0x57dff8}=_0x431f79['query'],_0x5ec36d=_0x57dff8?new Date(_0x57dff8):new Date(),_0x1f94e8=await Ventas['findAll']({'where':{'Fecha':{[sequelize['Op'][_0x1a65b2(0x1e3)]]:[new Date(_0x5ec36d[_0x1a65b2(0x16d)](0x0,0x0,0x0,0x0)),new Date(_0x5ec36d['setHours'](0x17,0x3b,0x3b,0x3e7))]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':_0x1a65b2(0x1c4),'include':[{'model':Productos,'as':_0x10c267[_0x1a65b2(0x184)]}]},{'model':Empleados,'as':_0x1a65b2(0x242),'attributes':[_0x10c267[_0x1a65b2(0x1be)]]}]}),_0xc7f968=_0x1f94e8['reduce']((_0x468316,_0x2b7d0e)=>_0x468316+Number(_0x2b7d0e['Total']),0x0),_0x40574d=_0x1f94e8[_0x1a65b2(0x154)],_0x58407c={};_0x1f94e8[_0x1a65b2(0xb7)](_0x5a6d32=>{const _0x209141=_0x1a65b2;_0x5a6d32[_0x209141(0x1c4)][_0x209141(0xb7)](_0x35ca62=>{const _0x277467=_0x209141,_0x232b61=_0x35ca62[_0x277467(0xf1)],_0x4422e1=_0x35ca62[_0x277467(0x13e)]?.[_0x277467(0x283)]||_0x10c267[_0x277467(0x20d)];!_0x58407c[_0x232b61]&&(_0x58407c[_0x232b61]={'Id_Productos':_0x232b61,'Nombre':_0x4422e1,'Cantidad':0x0,'Total':0x0}),_0x58407c[_0x232b61][_0x277467(0x206)]+=_0x35ca62[_0x277467(0x206)],_0x58407c[_0x232b61][_0x277467(0x19f)]+=_0x10c267['YwMVa'](Number,_0x35ca62[_0x277467(0x20f)]);});});const _0x5cedd9=Object[_0x1a65b2(0x259)](_0x58407c)[_0x1a65b2(0x21c)]((_0x323863,_0x198f73)=>_0x198f73[_0x1a65b2(0x19f)]-_0x323863[_0x1a65b2(0x19f)])['slice'](0x0,0x5);_0xcaef16[_0x1a65b2(0xe6)]({'status':_0x10c267['yFsGR'],'data':{'fecha':_0x5ec36d[_0x1a65b2(0x113)]()['split']('T')[0x0],'totalVentas':_0xc7f968,'cantidadVentas':_0x40574d,'productosTop':_0x5cedd9,'ventas':_0x1f94e8[_0x1a65b2(0x15f)](_0x1c09df=>({'Id_Ventas':_0x1c09df[_0x1a65b2(0x157)],'Total':_0x1c09df[_0x1a65b2(0x19f)],'Empleado':_0x1c09df['Id_Empleados_Empleado']?.[_0x1a65b2(0x283)],'Fecha':_0x1c09df['Fecha']}))}});}catch(_0x2dd938){console[_0x1a65b2(0x1bc)](_0x10c267['odbvJ'],_0x2dd938),_0xcaef16[_0x1a65b2(0x1d7)](0x1f4)[_0x1a65b2(0xe6)]({'status':_0x1a65b2(0x1bc),'message':_0x10c267[_0x1a65b2(0x255)]});}},exports[a0_0x15b2bd(0x142)]=async(_0x3fcc75,_0x1a1749)=>{const _0x11e92b=a0_0x15b2bd,_0x4d79c2={'sdgFe':function(_0x1a2987,_0x41f2e4){return _0x1a2987(_0x41f2e4);},'vrbpm':function(_0x490c5c,_0x49c9cf){return _0x490c5c-_0x49c9cf;},'KrrhS':function(_0x514423,_0x30c720){return _0x514423+_0x30c720;},'hTPWC':_0x11e92b(0x13e),'pJjto':'Id_Empleados_Empleado','VKjKO':'Nombre','jWgbA':function(_0x3e36b3,_0x5eeeb7){return _0x3e36b3(_0x5eeeb7);},'fmtkl':_0x11e92b(0x253),'aAIcD':'success','bgMbY':'Error\x20al\x20generar\x20reporte\x20mensual:','LzpAB':'error','OzBaa':_0x11e92b(0x233)};try{const {mes:_0xa16aa3,año:_0x4022f9}=_0x3fcc75[_0x11e92b(0x11f)],_0x5ed858=new Date(),_0x1afbc5=_0xa16aa3?_0x4d79c2[_0x11e92b(0x180)](parseInt(_0xa16aa3),0x1):_0x5ed858[_0x11e92b(0x218)](),_0x2d7158=_0x4022f9?_0x4d79c2[_0x11e92b(0xed)](parseInt,_0x4022f9):_0x5ed858['getFullYear'](),_0xefe446=new Date(_0x2d7158,_0x1afbc5,0x1),_0x27ab9a=new Date(_0x2d7158,_0x4d79c2[_0x11e92b(0xc3)](_0x1afbc5,0x1),0x0,0x17,0x3b,0x3b,0x3e7),_0x42fca5=await Ventas['findAll']({'where':{'Fecha':{[sequelize['Op']['between']]:[_0xefe446,_0x27ab9a]},'Estado':0x1},'include':[{'model':Detalle_Venta,'as':'Detalle_Venta','include':[{'model':Productos,'as':_0x4d79c2[_0x11e92b(0xca)]}]},{'model':Empleados,'as':_0x4d79c2['pJjto'],'attributes':[_0x4d79c2[_0x11e92b(0x174)]]}]}),_0x6d3890=_0x42fca5[_0x11e92b(0xd9)]((_0x289f0b,_0x26b9d5)=>_0x289f0b+Number(_0x26b9d5[_0x11e92b(0x19f)]),0x0),_0x76ba03=_0x42fca5[_0x11e92b(0x154)],_0x2f1b9c={};_0x42fca5[_0x11e92b(0xb7)](_0x5eb0c9=>{const _0x3c5bc4=_0x11e92b,_0x36bc9e=_0x5eb0c9['Fecha'][_0x3c5bc4(0x113)]()[_0x3c5bc4(0x10a)]('T')[0x0];!_0x2f1b9c[_0x36bc9e]&&(_0x2f1b9c[_0x36bc9e]={'total':0x0,'cantidad':0x0}),_0x2f1b9c[_0x36bc9e][_0x3c5bc4(0x288)]+=_0x4d79c2[_0x3c5bc4(0xed)](Number,_0x5eb0c9[_0x3c5bc4(0x19f)]),_0x2f1b9c[_0x36bc9e][_0x3c5bc4(0x276)]+=0x1;});const _0x2144a8={};for(const _0x2d4530 of _0x42fca5){const _0x31b262=_0x2d4530[_0x11e92b(0xf4)];let _0x17bfc4=_0x11e92b(0x253);if(_0x31b262){const _0xf2dc6b=await _0x4d79c2[_0x11e92b(0x1f1)](obtenerInfoEmpleado,_0x31b262);_0x17bfc4=_0xf2dc6b?.[_0x11e92b(0x283)]||_0x4d79c2['fmtkl'];}!_0x2144a8[_0x31b262]&&(_0x2144a8[_0x31b262]={'Id_Empleados':_0x31b262,'Nombre':_0x17bfc4,'Total':0x0,'Cantidad':0x0}),_0x2144a8[_0x31b262][_0x11e92b(0x19f)]+=_0x4d79c2['jWgbA'](Number,_0x2d4530[_0x11e92b(0x19f)]),_0x2144a8[_0x31b262][_0x11e92b(0x206)]+=0x1;}const _0x17d145=Object[_0x11e92b(0x259)](_0x2144a8)[_0x11e92b(0x21c)]((_0x2cd1ff,_0x2747c3)=>_0x2747c3[_0x11e92b(0x19f)]-_0x2cd1ff['Total'])[_0x11e92b(0x1b8)](0x0,0x5);_0x1a1749['json']({'status':_0x4d79c2[_0x11e92b(0x190)],'data':{'mes':_0x4d79c2[_0x11e92b(0xc3)](_0x1afbc5,0x1),'año':_0x2d7158,'totalVentas':_0x6d3890,'cantidadVentas':_0x76ba03,'promedioDiario':_0x76ba03/new Date(_0x2d7158,_0x1afbc5+0x1,0x0)[_0x11e92b(0x285)](),'ventasPorDia':_0x2f1b9c,'empleadosTop':_0x17d145}});}catch(_0x10cfa5){console['error'](_0x4d79c2['bgMbY'],_0x10cfa5),_0x1a1749[_0x11e92b(0x1d7)](0x1f4)['json']({'status':_0x4d79c2[_0x11e92b(0xd2)],'message':_0x4d79c2[_0x11e92b(0x22d)]});}},exports[a0_0x15b2bd(0x1b3)]=async(_0x4211e8,_0x178e17)=>{const _0x5de1b7=a0_0x15b2bd,_0x4b34cb={'vepui':function(_0x5dab28,_0x502ef4){return _0x5dab28===_0x502ef4;},'nwHtn':_0x5de1b7(0x181),'SEsjq':_0x5de1b7(0xba),'mTtNN':_0x5de1b7(0x10e),'IhGtD':function(_0x44b14f,_0x7c4d72){return _0x44b14f(_0x7c4d72);},'JpWjd':_0x5de1b7(0x1c3),'CucLR':_0x5de1b7(0x27a),'zoiFw':_0x5de1b7(0x1ab),'AHUEd':_0x5de1b7(0xb3),'yVETt':function(_0x2f11e2,_0x3f6238){return _0x2f11e2(_0x3f6238);},'OEeud':function(_0x2c134,_0x477b34){return _0x2c134>=_0x477b34;},'kGCSH':function(_0x12a89f,_0x825810){return _0x12a89f(_0x825810);},'MDsmz':function(_0x5a4f94,_0x5832b9){return _0x5a4f94>=_0x5832b9;},'HFXGL':_0x5de1b7(0x16f),'PMhcS':function(_0x46fc6c,_0x182d06){return _0x46fc6c>_0x182d06;},'vwLlr':'tamaño','FqXtE':_0x5de1b7(0x251),'PUWvF':'Tamaño\x20no\x20encontrado','imfwD':_0x5de1b7(0x25f),'UeWIf':_0x5de1b7(0x11c),'gcvlC':function(_0x4421e5,_0x5f1c0d){return _0x4421e5(_0x5f1c0d);},'EKDgZ':function(_0x43a1e0,_0x1bfdba){return _0x43a1e0*_0x1bfdba;},'CndKk':function(_0x4b891a,_0x6814e1){return _0x4b891a*_0x6814e1;},'GKqyr':function(_0x3a362c,_0x3f6ad5){return _0x3a362c(_0x3f6ad5);},'TMHkt':function(_0x561d0f,_0x90b3bb){return _0x561d0f===_0x90b3bb;},'JuPbK':'Id_Tallas','NKfMZ':_0x5de1b7(0x283),'DHvmY':_0x5de1b7(0x1bc),'MBEhg':function(_0x536ed4,_0x49347b){return _0x536ed4(_0x49347b);},'szCzg':function(_0x41f7af,_0x460637){return _0x41f7af||_0x460637;},'JNgSo':'producto','NxgYU':'success','KUaYi':'Error\x20al\x20validar\x20stock\x20de\x20venta:'};try{const {Detalle_Venta:_0x4d8241}=_0x4211e8[_0x5de1b7(0x140)];if(!_0x4d8241||!Array[_0x5de1b7(0xb6)](_0x4d8241)||_0x4b34cb[_0x5de1b7(0x110)](_0x4d8241[_0x5de1b7(0x154)],0x0))return _0x178e17[_0x5de1b7(0x1d7)](0x190)[_0x5de1b7(0xe6)]({'status':_0x5de1b7(0x1bc),'message':_0x4b34cb[_0x5de1b7(0x1c2)]});const _0x47db34=[];let _0x4e05e9=!![];const _0x2cd7c8=[];for(const _0x313f9a of _0x4d8241){const {Id_Productos:_0x340b4a,Cantidad:_0x5d3bbc,Tallas:_0x5147c2,Tamanos:_0x57c1e0}=_0x313f9a;if(!_0x340b4a){_0x4e05e9=![],_0x2cd7c8[_0x5de1b7(0x132)](_0x4b34cb[_0x5de1b7(0xc4)]);continue;}const _0x579d35=await Productos[_0x5de1b7(0x17d)](_0x340b4a);if(!_0x579d35){_0x4e05e9=![],_0x2cd7c8[_0x5de1b7(0x132)](_0x5de1b7(0x1ca)+_0x340b4a+_0x5de1b7(0xcf)),_0x47db34[_0x5de1b7(0x132)]({'Id_Productos':_0x340b4a,'Nombre':_0x4b34cb['mTtNN'],'stockDisponible':![],'mensajes':['Producto\x20con\x20ID\x20'+_0x340b4a+_0x5de1b7(0xcf)]});continue;}let _0x5b1b25=!![],_0x15076c=[],_0x37981d=[];if(_0x5147c2&&_0x5147c2['length']>0x0){let _0x7933dd=0x0;for(const _0x56b488 of _0x5147c2){const _0x3503b7=_0x56b488[_0x5de1b7(0x1c3)]||_0x56b488[_0x5de1b7(0x203)]||_0x56b488[_0x5de1b7(0x125)]||'',_0x456e94=_0x4b34cb[_0x5de1b7(0xe4)](Number,_0x56b488[_0x5de1b7(0x276)]||_0x56b488[_0x5de1b7(0x206)]||0x0);if(!_0x3503b7){_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)]('Nombre\x20de\x20talla\x20no\x20válido\x20para\x20el\x20producto\x20'+_0x579d35[_0x5de1b7(0x283)]),_0x37981d['push']({'tipo':_0x4b34cb[_0x5de1b7(0xbe)],'nombre':_0x4b34cb[_0x5de1b7(0x182)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x4b34cb[_0x5de1b7(0x1dd)]});continue;}const _0x2ab0d9=await _0x5147c2[_0x5de1b7(0xe5)]({'where':{'Nombre':_0x3503b7}});if(!_0x2ab0d9){_0x5b1b25=![],_0x4e05e9=![],_0x15076c['push'](_0x5de1b7(0x26a)+_0x3503b7+_0x5de1b7(0x287)),_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb[_0x5de1b7(0xbe)],'nombre':_0x3503b7,'disponible':0x0,'solicitado':_0x456e94,'suficiente':![],'error':_0x4b34cb[_0x5de1b7(0x1a0)]});continue;}const _0x1fe00d=await Producto_Tallas[_0x5de1b7(0xe5)]({'where':{'Id_Productos':_0x579d35[_0x5de1b7(0xf1)],'Id_Tallas':_0x2ab0d9['Id_Tallas']}}),_0x30452f=_0x4b34cb[_0x5de1b7(0x1d4)](Number,_0x1fe00d?.[_0x5de1b7(0x116)]||0x0),_0x3d7c97=_0x4b34cb[_0x5de1b7(0x159)](_0x30452f,_0x456e94);!_0x3d7c97&&(_0x5b1b25=![],_0x4e05e9=![],_0x15076c['push'](_0x5de1b7(0xd1)+_0x3503b7+_0x5de1b7(0x196)+_0x30452f+_0x5de1b7(0xe1)+_0x456e94)),_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb[_0x5de1b7(0xbe)],'nombre':_0x3503b7,'disponible':_0x30452f,'solicitado':_0x456e94,'suficiente':_0x3d7c97}),_0x7933dd+=_0x456e94;}const _0x275c4f=_0x4b34cb[_0x5de1b7(0x258)](Number,_0x579d35[_0x5de1b7(0x116)]||0x0),_0x4b2a9a=_0x4b34cb[_0x5de1b7(0x1b5)](_0x275c4f,_0x7933dd);!_0x4b2a9a&&(_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)](_0x5de1b7(0x1e2)+_0x579d35[_0x5de1b7(0x283)]+':\x20disponible\x20'+_0x275c4f+',\x20solicitado\x20'+_0x7933dd)),_0x37981d['push']({'tipo':_0x4b34cb[_0x5de1b7(0x1e9)],'nombre':_0x579d35[_0x5de1b7(0x283)],'disponible':_0x275c4f,'solicitado':_0x7933dd,'suficiente':_0x4b2a9a});}if(_0x57c1e0&&_0x4b34cb[_0x5de1b7(0xee)](_0x57c1e0[_0x5de1b7(0x154)],0x0))for(const _0x4fe6b5 of _0x57c1e0){const _0x44d2f7=_0x4fe6b5[_0x5de1b7(0x125)]||_0x4fe6b5['Nombre']||'';if(!_0x44d2f7){_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)](_0x5de1b7(0x191)+_0x579d35[_0x5de1b7(0x283)]),_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb['vwLlr'],'nombre':_0x4b34cb[_0x5de1b7(0x182)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x4b34cb[_0x5de1b7(0x13a)]});continue;}const _0x868d65=await Tamano['findOne']({'where':{'Nombre':_0x44d2f7}});if(!_0x868d65){_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)](_0x5de1b7(0x156)+_0x44d2f7+_0x5de1b7(0xcf)),_0x37981d['push']({'tipo':_0x4b34cb['vwLlr'],'nombre':_0x44d2f7,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x4b34cb[_0x5de1b7(0xd7)]});continue;}const _0x23df1d=await Producto_Tamano[_0x5de1b7(0xe5)]({'where':{'Id_Productos':_0x579d35[_0x5de1b7(0xf1)],'Id_Tamano':_0x868d65['Id_Tamano']}});if(!_0x23df1d){_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)]('El\x20producto\x20'+_0x579d35[_0x5de1b7(0x283)]+_0x5de1b7(0x199)+_0x44d2f7+_0x5de1b7(0x1ec)),_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb['vwLlr'],'nombre':_0x44d2f7,'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':_0x4b34cb['imfwD']});continue;}const _0x5af272=await Producto_Tamano_Insumos[_0x5de1b7(0xeb)]({'where':{'Id_Producto_Tamano':_0x23df1d[_0x5de1b7(0xd4)]},'include':[{'model':Insumos,'as':_0x4b34cb[_0x5de1b7(0x1e0)]}]}),_0x368630=await Tamano_Insumos[_0x5de1b7(0xeb)]({'where':{'Id_Tamano':_0x868d65[_0x5de1b7(0x1ed)]},'include':[{'model':Insumos,'as':_0x5de1b7(0x11c)}]}),_0x343156=_0x4b34cb[_0x5de1b7(0xe4)](Number,_0x4fe6b5['Cantidad']||_0x4fe6b5[_0x5de1b7(0x276)]||0x0);let _0x31fbe1=!![];const _0x302f2a=[],_0x3f589b=new Map();for(const _0x281fdd of _0x5af272){const _0x571011=_0x281fdd[_0x5de1b7(0x11c)],_0x4d9aa6=_0x4b34cb['gcvlC'](Number,_0x281fdd[_0x5de1b7(0x23f)]||0x0),_0x2086a3=_0x4b34cb[_0x5de1b7(0x290)](_0x4d9aa6,_0x343156),_0x3b7ee8=Number(_0x571011['Stock']||0x0),_0xd105b1=_0x4b34cb['MDsmz'](_0x3b7ee8,_0x2086a3);!_0xd105b1&&(_0x31fbe1=![],_0x5b1b25=![],_0x4e05e9=![],_0x15076c['push'](_0x5de1b7(0x166)+_0x571011[_0x5de1b7(0x283)]+'.\x20Disponible:\x20'+_0x3b7ee8+_0x5de1b7(0x1c8)+_0x2086a3)),_0x302f2a[_0x5de1b7(0x132)]({'insumo':_0x571011[_0x5de1b7(0x283)],'disponible':_0x3b7ee8,'necesario':_0x2086a3,'suficiente':_0xd105b1,'tipo':_0x5de1b7(0xec)}),_0x3f589b[_0x5de1b7(0x1fc)](_0x571011['Id_Insumos'],!![]);}for(const _0x1b69ef of _0x368630){const _0x570f90=_0x1b69ef[_0x5de1b7(0x11c)];if(_0x3f589b[_0x5de1b7(0x278)](_0x570f90[_0x5de1b7(0x1fb)]))continue;const _0x1d248b=_0x4b34cb['gcvlC'](Number,_0x1b69ef['Cantidad']||0x0),_0x102b04=_0x4b34cb[_0x5de1b7(0xd8)](_0x1d248b,_0x343156),_0x502d9f=_0x4b34cb[_0x5de1b7(0x1d0)](Number,_0x570f90['Stock']||0x0),_0x3cf790=_0x4b34cb[_0x5de1b7(0x1b5)](_0x502d9f,_0x102b04);!_0x3cf790&&(_0x31fbe1=![],_0x5b1b25=![],_0x4e05e9=![],_0x15076c[_0x5de1b7(0x132)](_0x5de1b7(0x167)+_0x570f90[_0x5de1b7(0x283)]+'.\x20Disponible:\x20'+_0x502d9f+_0x5de1b7(0x1c8)+_0x102b04)),_0x302f2a[_0x5de1b7(0x132)]({'insumo':_0x570f90['Nombre'],'disponible':_0x502d9f,'necesario':_0x102b04,'suficiente':_0x3cf790,'tipo':'general'});}_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb[_0x5de1b7(0x165)],'nombre':_0x44d2f7,'cantidad':_0x343156,'insumos':_0x302f2a,'suficiente':_0x31fbe1});}if((!_0x5147c2||_0x4b34cb[_0x5de1b7(0x110)](_0x5147c2['length'],0x0))&&(!_0x57c1e0||_0x4b34cb[_0x5de1b7(0x277)](_0x57c1e0[_0x5de1b7(0x154)],0x0))){const _0x3b48ab=await Producto_Tallas[_0x5de1b7(0xeb)]({'where':{'Id_Productos':_0x579d35[_0x5de1b7(0xf1)]},'include':[{'model':_0x5147c2,'as':_0x5de1b7(0x176),'attributes':[_0x4b34cb[_0x5de1b7(0x22f)],_0x4b34cb[_0x5de1b7(0x1e8)]]}]});if(_0x3b48ab&&_0x3b48ab[_0x5de1b7(0x154)]>0x0)_0x5b1b25=![],_0x4e05e9=![],_0x15076c['push'](_0x5de1b7(0x207)+_0x579d35[_0x5de1b7(0x283)]+_0x5de1b7(0x16b)+_0x3b48ab[_0x5de1b7(0x15f)](_0xeeca48=>_0xeeca48[_0x5de1b7(0x176)]?.['Nombre']||_0x5de1b7(0x27a))['join'](',\x20')),_0x37981d[_0x5de1b7(0x132)]({'tipo':_0x4b34cb['DHvmY'],'nombre':_0x579d35[_0x5de1b7(0x283)],'disponible':0x0,'solicitado':0x0,'suficiente':![],'error':'Producto\x20requiere\x20tallas'});else{const _0x20cc70=_0x4b34cb[_0x5de1b7(0x238)](Number,_0x579d35['Stock']||0x0),_0x218b12=_0x4b34cb[_0x5de1b7(0x258)](Number,_0x4b34cb[_0x5de1b7(0x137)](_0x5d3bbc,0x0)),_0xdddbfd=_0x4b34cb['OEeud'](_0x20cc70,_0x218b12);!_0xdddbfd&&(_0x5b1b25=![],_0x4e05e9=![],_0x15076c['push'](_0x5de1b7(0x118)+_0x579d35['Nombre']+_0x5de1b7(0xde)+_0x20cc70+_0x5de1b7(0xd5)+_0x218b12)),_0x37981d['push']({'tipo':_0x4b34cb[_0x5de1b7(0x216)],'nombre':_0x579d35['Nombre'],'disponible':_0x20cc70,'solicitado':_0x218b12,'suficiente':_0xdddbfd});}}_0x47db34[_0x5de1b7(0x132)]({'Id_Productos':_0x579d35['Id_Productos'],'Nombre':_0x579d35[_0x5de1b7(0x283)],'stockDisponible':_0x5b1b25,'mensajes':_0x15076c,'detallesStock':_0x37981d});}_0x178e17[_0x5de1b7(0xe6)]({'status':_0x4b34cb['NxgYU'],'data':{'ventaValida':_0x4e05e9,'mensajesGenerales':_0x2cd7c8,'resultados':_0x47db34}});}catch(_0x358876){console[_0x5de1b7(0x1bc)](_0x4b34cb[_0x5de1b7(0x24a)],_0x358876),_0x178e17[_0x5de1b7(0x1d7)](0x1f4)['json']({'status':_0x4b34cb[_0x5de1b7(0x235)],'message':'Error\x20al\x20validar\x20stock\x20de\x20venta'});}},exports[a0_0x15b2bd(0x21b)]=async(_0x191bbc,_0x40a245)=>{const _0x1887a4=a0_0x15b2bd,_0x3fe20c={'kVJAQ':_0x1887a4(0x1bc),'zMQyI':_0x1887a4(0x1b4),'bPbMv':_0x1887a4(0x10e),'qNLsw':'Id_Tallas_Talla','iYyNM':_0x1887a4(0x18d),'KaCoZ':_0x1887a4(0x283),'BAJbK':'success','iVpJh':function(_0x1c9f00,_0x5e8353){return _0x1c9f00>_0x5e8353;},'VSBla':_0x1887a4(0x280)};try{const {Id_Productos:_0x377fef}=_0x191bbc[_0x1887a4(0x1cf)];if(!_0x377fef)return _0x40a245[_0x1887a4(0x1d7)](0x190)[_0x1887a4(0xe6)]({'status':_0x3fe20c[_0x1887a4(0x18b)],'message':_0x3fe20c[_0x1887a4(0x273)]});const _0x4078b7=await Productos['findByPk'](_0x377fef);if(!_0x4078b7)return _0x40a245[_0x1887a4(0x1d7)](0x194)[_0x1887a4(0xe6)]({'status':_0x3fe20c[_0x1887a4(0x18b)],'message':_0x3fe20c[_0x1887a4(0x1c6)]});const _0x41a63a=await Producto_Tallas[_0x1887a4(0xeb)]({'where':{'Id_Productos':_0x377fef},'include':[{'model':Tallas,'as':_0x3fe20c[_0x1887a4(0x18e)],'attributes':[_0x3fe20c['iYyNM'],_0x3fe20c[_0x1887a4(0x1fe)]]}]}),_0x54928f=_0x41a63a['map'](_0x42b37a=>({'Id_Producto_Tallas':_0x42b37a[_0x1887a4(0xc5)],'Id_Tallas':_0x42b37a['Id_Tallas'],'Nombre_Talla':_0x42b37a[_0x1887a4(0x176)]?.[_0x1887a4(0x283)]||_0x1887a4(0x27a),'Stock':_0x42b37a['Stock'],'Precio':_0x42b37a[_0x1887a4(0x194)]||0x0}));_0x40a245[_0x1887a4(0xe6)]({'status':_0x3fe20c[_0x1887a4(0x114)],'data':{'Id_Productos':_0x4078b7['Id_Productos'],'Nombre':_0x4078b7[_0x1887a4(0x283)],'tieneTallas':_0x3fe20c[_0x1887a4(0x1de)](_0x54928f[_0x1887a4(0x154)],0x0),'tallasDisponibles':_0x54928f,'totalTallas':_0x54928f[_0x1887a4(0x154)]}});}catch(_0x402d5b){console[_0x1887a4(0x1bc)](_0x3fe20c['VSBla'],_0x402d5b),_0x40a245[_0x1887a4(0x1d7)](0x1f4)[_0x1887a4(0xe6)]({'status':_0x1887a4(0x1bc),'message':'Error\x20al\x20obtener\x20tallas\x20del\x20producto'});}},exports['obtenerTamanosProducto']=async(_0x46b518,_0xcffba0)=>{const _0xa4dde7=a0_0x15b2bd,_0x189fb4={'FbvfU':_0xa4dde7(0x1b4),'KSmtZ':_0xa4dde7(0x1bc),'QLBio':_0xa4dde7(0x10e),'HOWZr':_0xa4dde7(0x1ed),'NVphp':'Cantidad_Maxima','DjSWR':'Precio_Venta','Zaxgk':_0xa4dde7(0xef),'BIICF':'Id_Insumos_Insumo','ofhlA':_0xa4dde7(0x1fb),'BhVpN':_0xa4dde7(0x283),'IUGAD':'Unidad_Medida','qeqqQ':_0xa4dde7(0x25e),'YDJBP':'Error\x20al\x20obtener\x20tamaños\x20del\x20producto'};try{const {Id_Productos:_0x348add}=_0x46b518[_0xa4dde7(0x1cf)];if(!_0x348add)return _0xcffba0['status'](0x190)['json']({'status':_0xa4dde7(0x1bc),'message':_0x189fb4[_0xa4dde7(0xe9)]});const _0x235bfc=await Productos[_0xa4dde7(0x17d)](_0x348add);if(!_0x235bfc)return _0xcffba0[_0xa4dde7(0x1d7)](0x194)['json']({'status':_0x189fb4[_0xa4dde7(0x27b)],'message':_0x189fb4[_0xa4dde7(0xcb)]});const _0xe02196=await Producto_Tamano[_0xa4dde7(0xeb)]({'where':{'Id_Productos':_0x348add},'include':[{'model':Tamano,'as':_0xa4dde7(0x230),'attributes':[_0x189fb4[_0xa4dde7(0x237)],_0xa4dde7(0x283),_0x189fb4['NVphp'],_0x189fb4[_0xa4dde7(0x1d1)]]},{'model':Producto_Tamano_Insumos,'as':_0x189fb4[_0xa4dde7(0x19c)],'include':[{'model':Insumos,'as':_0x189fb4[_0xa4dde7(0xc6)],'attributes':[_0x189fb4[_0xa4dde7(0x134)],_0x189fb4[_0xa4dde7(0x18c)],_0xa4dde7(0x116),_0x189fb4[_0xa4dde7(0x23b)]]}]}]}),_0x400937=_0xe02196[_0xa4dde7(0x15f)](_0x47b5e6=>({'Id_Producto_Tamano':_0x47b5e6['Id_Producto_Tamano'],'Id_Tamano':_0x47b5e6[_0xa4dde7(0x1ed)],'nombre':_0x47b5e6[_0xa4dde7(0x230)]?.[_0xa4dde7(0x283)]||_0xa4dde7(0x27a),'precio':_0x47b5e6[_0xa4dde7(0x230)]?.['Precio_Venta']?.['toString']()||'0','Cantidad_Maxima':_0x47b5e6[_0xa4dde7(0x230)]?.[_0xa4dde7(0x200)]||0x0,'insumos':_0x47b5e6[_0xa4dde7(0xef)]?.[_0xa4dde7(0x15f)](_0x135c31=>({'Id_Insumo':_0x135c31[_0xa4dde7(0x11c)]?.[_0xa4dde7(0x1fb)],'Nombre':_0x135c31[_0xa4dde7(0x11c)]?.[_0xa4dde7(0x283)]||'N/A','Stock':_0x135c31[_0xa4dde7(0x11c)]?.['Stock']||0x0,'Cantidad_Consumo':_0x135c31[_0xa4dde7(0x23f)]||0x0,'Unidad_Medida':_0x135c31[_0xa4dde7(0x11c)]?.['Unidad_Medida']||_0xa4dde7(0x27a)}))||[]}));_0xcffba0[_0xa4dde7(0xe6)]({'status':_0x189fb4['qeqqQ'],'data':{'Id_Productos':_0x235bfc[_0xa4dde7(0xf1)],'Nombre':_0x235bfc[_0xa4dde7(0x283)],'tieneTamanos':_0x400937[_0xa4dde7(0x154)]>0x0,'tamanosDisponibles':_0x400937,'totalTamanos':_0x400937['length']}});}catch(_0x3611ed){console[_0xa4dde7(0x1bc)](_0xa4dde7(0xc1),_0x3611ed),_0xcffba0['status'](0x1f4)['json']({'status':_0x189fb4[_0xa4dde7(0x27b)],'message':_0x189fb4[_0xa4dde7(0x109)]});}},exports[a0_0x15b2bd(0x14d)]=async(_0xbf0c47,_0xf982c9)=>{const _0x59e959=a0_0x15b2bd,_0x42ea66={'UTeER':_0x59e959(0x1bc),'UEPAd':_0x59e959(0x269),'tpkgX':_0x59e959(0x1d2),'UCuDW':_0x59e959(0x11c),'gWxRv':'Id_Insumos','lXMfX':_0x59e959(0x283),'pLXzn':_0x59e959(0x195),'sclPE':'success','SqhLC':_0x59e959(0x262),'lVUyl':'Error\x20al\x20obtener\x20tamaño\x20por\x20nombre'};try{const {nombreTamano:_0x3fff1c}=_0xbf0c47[_0x59e959(0x1cf)];if(!_0x3fff1c)return _0xf982c9[_0x59e959(0x1d7)](0x190)[_0x59e959(0xe6)]({'status':_0x42ea66[_0x59e959(0xd6)],'message':_0x42ea66[_0x59e959(0x261)]});const _0x44aae4=await Tamano[_0x59e959(0xe5)]({'where':{'Nombre':_0x3fff1c},'include':[{'model':Tamano_Insumos,'as':_0x42ea66[_0x59e959(0x198)],'include':[{'model':Insumos,'as':_0x42ea66[_0x59e959(0xdb)],'attributes':[_0x42ea66[_0x59e959(0x1f7)],_0x42ea66[_0x59e959(0xfc)],_0x59e959(0x116),_0x42ea66['pLXzn']]}]}]});if(!_0x44aae4)return _0xf982c9[_0x59e959(0x1d7)](0x194)[_0x59e959(0xe6)]({'status':_0x42ea66[_0x59e959(0xd6)],'message':_0x59e959(0x156)+_0x3fff1c+_0x59e959(0xcf)});const _0x411f34={'Id_Tamano':_0x44aae4[_0x59e959(0x1ed)],'nombre':_0x44aae4['Nombre'],'precio':_0x44aae4[_0x59e959(0x120)]?.[_0x59e959(0x15e)]()||'0','Cantidad_Maxima':_0x44aae4['Cantidad_Maxima'],'Estado':_0x44aae4[_0x59e959(0x270)],'insumos':_0x44aae4[_0x59e959(0x1d2)]?.[_0x59e959(0x15f)](_0x3038c9=>({'Id_Insumo':_0x3038c9[_0x59e959(0x11c)]?.[_0x59e959(0x1fb)],'Nombre':_0x3038c9[_0x59e959(0x11c)]?.[_0x59e959(0x283)]||_0x59e959(0x27a),'Stock':_0x3038c9['Id_Insumos_Insumo']?.[_0x59e959(0x116)]||0x0,'Cantidad':_0x3038c9['Cantidad']||0x0,'Unidad_Medida':_0x3038c9[_0x59e959(0x11c)]?.['Unidad_Medida']||_0x59e959(0x27a)}))||[]};_0xf982c9[_0x59e959(0xe6)]({'status':_0x42ea66[_0x59e959(0x232)],'data':_0x411f34});}catch(_0x3a9cc6){console['error'](_0x42ea66[_0x59e959(0x249)],_0x3a9cc6),_0xf982c9[_0x59e959(0x1d7)](0x1f4)[_0x59e959(0xe6)]({'status':_0x42ea66[_0x59e959(0xd6)],'message':_0x42ea66[_0x59e959(0x209)]});}},exports[a0_0x15b2bd(0x1d5)]=async(_0x1d1abd,_0x2b13f9)=>{const _0x2faddc=a0_0x15b2bd,_0x160053={'bQcXt':_0x2faddc(0x252),'rjtWC':_0x2faddc(0x27a),'trtqN':_0x2faddc(0x1bc),'jnCxo':'Id_Tamano_Tamano','mgQdd':_0x2faddc(0x1ed),'YpYEb':_0x2faddc(0x283),'iYmom':_0x2faddc(0x120),'oCcKG':'Producto_Tamano_Insumos','vlvTl':_0x2faddc(0x11c),'ABUpK':_0x2faddc(0x116),'YgWrI':'Unidad_Medida','bAmWk':function(_0x3a8aad,_0x18ae19){return _0x3a8aad>_0x18ae19;},'VjQLq':function(_0x2513e4,_0x4173a5){return _0x2513e4/_0x4173a5;}};try{const {Id_Productos:_0x5d7d2f}=_0x1d1abd[_0x2faddc(0x1cf)];if(!_0x5d7d2f)return _0x2b13f9['status'](0x190)[_0x2faddc(0xe6)]({'status':_0x2faddc(0x1bc),'message':_0x2faddc(0x1b4)});const _0x5a8a5b=await Productos[_0x2faddc(0x17d)](_0x5d7d2f);if(!_0x5a8a5b)return _0x2b13f9['status'](0x194)[_0x2faddc(0xe6)]({'status':_0x160053[_0x2faddc(0x268)],'message':_0x2faddc(0x10e)});const _0x19987c=await Producto_Tamano[_0x2faddc(0xeb)]({'where':{'Id_Productos':_0x5d7d2f},'include':[{'model':Tamano,'as':_0x160053[_0x2faddc(0x231)],'attributes':[_0x160053[_0x2faddc(0x28e)],_0x160053['YpYEb'],'Cantidad_Maxima',_0x160053['iYmom']]},{'model':Producto_Tamano_Insumos,'as':_0x160053[_0x2faddc(0x1a1)],'include':[{'model':Insumos,'as':_0x160053[_0x2faddc(0xdf)],'attributes':[_0x2faddc(0x1fb),_0x160053[_0x2faddc(0x16a)],_0x160053[_0x2faddc(0x1c9)],_0x160053[_0x2faddc(0x22a)],'Id_Categoria_Insumos']}]}]}),_0x2c7057=_0x19987c[_0x2faddc(0x15f)](_0x4dd500=>{const _0x5bdcc4=_0x2faddc,_0x2cedc1=_0x4dd500[_0x5bdcc4(0xef)]?.[_0x5bdcc4(0x15f)](_0x308bf1=>({'Id_Insumo':_0x308bf1[_0x5bdcc4(0x11c)]?.[_0x5bdcc4(0x1fb)],'Nombre':_0x308bf1[_0x5bdcc4(0x11c)]?.[_0x5bdcc4(0x283)]||_0x5bdcc4(0x27a),'Stock':_0x308bf1['Id_Insumos_Insumo']?.[_0x5bdcc4(0x116)]||0x0,'Cantidad_Consumo':_0x308bf1['Cantidad_Consumo']||0x0,'Unidad_Medida':_0x308bf1[_0x5bdcc4(0x11c)]?.[_0x5bdcc4(0x195)]||_0x5bdcc4(0x27a),'Id_Categoria':_0x308bf1[_0x5bdcc4(0x11c)]?.[_0x5bdcc4(0x17c)]||_0x5bdcc4(0x27a)}))||[];return{'Id_Producto_Tamano':_0x4dd500[_0x5bdcc4(0xd4)],'Id_Tamano':_0x4dd500[_0x5bdcc4(0x1ed)],'Nombre_Tamano':_0x4dd500[_0x5bdcc4(0x230)]?.[_0x5bdcc4(0x283)]||_0x160053['rjtWC'],'Cantidad_Maxima':_0x4dd500['Id_Tamano_Tamano']?.[_0x5bdcc4(0x200)]||0x0,'Precio_Venta':_0x4dd500[_0x5bdcc4(0x230)]?.[_0x5bdcc4(0x120)]||0x0,'Total_Insumos':_0x2cedc1[_0x5bdcc4(0x154)],'Insumos':_0x2cedc1,'Insumos_Por_Categoria':_0x2cedc1['reduce']((_0x4c2815,_0x146466)=>{const _0x1a63d6=_0x5bdcc4,_0x2e18f5=_0x146466[_0x1a63d6(0x169)]||_0x160053['bQcXt'];return!_0x4c2815[_0x2e18f5]&&(_0x4c2815[_0x2e18f5]=[]),_0x4c2815[_0x2e18f5][_0x1a63d6(0x132)](_0x146466),_0x4c2815;},{})};}),_0x5cd0f3=_0x2c7057[_0x2faddc(0x154)],_0x4c0758=_0x2c7057[_0x2faddc(0xd9)]((_0x668d32,_0xfb9c64)=>_0x668d32+_0xfb9c64[_0x2faddc(0xe3)],0x0),_0x25a6b9=_0x2c7057[_0x2faddc(0x128)](_0x51278f=>_0x51278f[_0x2faddc(0xe3)]===0x0);_0x2b13f9[_0x2faddc(0xe6)]({'status':_0x2faddc(0x25e),'message':_0x2faddc(0x24e)+_0x5a8a5b['Nombre'],'data':{'Id_Productos':_0x5a8a5b[_0x2faddc(0xf1)],'Nombre_Producto':_0x5a8a5b[_0x2faddc(0x283)],'Resumen':{'Total_Tamanos':_0x5cd0f3,'Total_Insumos_Configurados':_0x4c0758,'Tamanos_Sin_Insumos':_0x25a6b9['length'],'Promedio_Insumos_Por_Tamaño':_0x160053[_0x2faddc(0x103)](_0x5cd0f3,0x0)?_0x160053[_0x2faddc(0x211)](_0x4c0758,_0x5cd0f3)[_0x2faddc(0x111)](0x2):0x0},'Configuracion_Completa':_0x2c7057,'Alertas':_0x160053[_0x2faddc(0x103)](_0x25a6b9[_0x2faddc(0x154)],0x0)?[_0x25a6b9['length']+_0x2faddc(0x279)+_0x25a6b9[_0x2faddc(0x15f)](_0x1a0bd8=>_0x1a0bd8[_0x2faddc(0x1f3)])[_0x2faddc(0x1bb)](',\x20')]:[]}});}catch(_0x1344c7){console[_0x2faddc(0x1bc)](_0x2faddc(0x23c),_0x1344c7),_0x2b13f9[_0x2faddc(0x1d7)](0x1f4)['json']({'status':_0x160053[_0x2faddc(0x268)],'message':_0x2faddc(0x141),'detail':_0x1344c7[_0x2faddc(0xb4)]});}},exports['verificarConfiguracionTallas']=async(_0x3bb019,_0x4192cf)=>{const _0x3b4541=a0_0x15b2bd,_0x254825={'YprUA':_0x3b4541(0x1bc),'UkRqZ':_0x3b4541(0x1b4),'xkRDY':_0x3b4541(0x10e),'qBBuO':'Id_Tallas','EApha':_0x3b4541(0x283),'bxFPx':_0x3b4541(0x229)};try{const {Id_Productos:_0x34d948}=_0x3bb019['params'];if(!_0x34d948)return _0x4192cf[_0x3b4541(0x1d7)](0x190)[_0x3b4541(0xe6)]({'status':_0x254825[_0x3b4541(0x246)],'message':_0x254825[_0x3b4541(0x1a3)]});const _0x325abe=await Productos[_0x3b4541(0x17d)](_0x34d948);if(!_0x325abe)return _0x4192cf[_0x3b4541(0x1d7)](0x194)['json']({'status':_0x254825[_0x3b4541(0x246)],'message':_0x254825[_0x3b4541(0x289)]});const _0x4d11b3=await Producto_Tallas['findAll']({'where':{'Id_Productos':_0x34d948},'include':[{'model':Tallas,'as':'Id_Tallas_Talla','attributes':[_0x254825['qBBuO'],_0x254825[_0x3b4541(0x144)],_0x254825[_0x3b4541(0xda)]]}]}),_0x44f2f6=await Tallas[_0x3b4541(0xeb)]({'attributes':[_0x254825[_0x3b4541(0x171)],_0x3b4541(0x283),_0x254825[_0x3b4541(0xda)]]}),_0x351e93=_0x4d11b3[_0x3b4541(0x15f)](_0x13bbe3=>({'Id_Producto_Tallas':_0x13bbe3['Id_Producto_Tallas'],'Id_Tallas':_0x13bbe3['Id_Tallas'],'Nombre_Talla':_0x13bbe3[_0x3b4541(0x176)]?.[_0x3b4541(0x283)]||'Sin\x20nombre','Id_Categoria':_0x13bbe3['Id_Tallas_Talla']?.['Id_Categoria_Producto']||_0x3b4541(0x27a),'Stock':_0x13bbe3[_0x3b4541(0x116)]}));_0x4192cf[_0x3b4541(0xe6)]({'status':'success','message':_0x3b4541(0x20a)+_0x325abe['Nombre'],'data':{'Id_Productos':_0x325abe[_0x3b4541(0xf1)],'Nombre_Producto':_0x325abe[_0x3b4541(0x283)],'Tallas_Configuradas':_0x351e93,'Total_Tallas_Configuradas':_0x351e93[_0x3b4541(0x154)],'Todas_Las_Tallas_Sistema':_0x44f2f6[_0x3b4541(0x15f)](_0x3cd047=>({'Id_Tallas':_0x3cd047[_0x3b4541(0x18d)],'Nombre':_0x3cd047[_0x3b4541(0x283)],'Id_Categoria_Producto':_0x3cd047[_0x3b4541(0x229)]})),'Total_Tallas_Sistema':_0x44f2f6['length']}});}catch(_0x20d340){return console[_0x3b4541(0x1bc)](_0x3b4541(0x221),_0x20d340),_0x4192cf[_0x3b4541(0x1d7)](0x1f4)[_0x3b4541(0xe6)]({'status':_0x254825[_0x3b4541(0x246)],'message':_0x20d340[_0x3b4541(0xb4)]});}},exports[a0_0x15b2bd(0x1cb)]=async(_0x5bae7a,_0x3d42b7)=>{const _0x221ae8=a0_0x15b2bd,_0x11b828={'rnDHv':_0x221ae8(0x1bc),'tuXVW':_0x221ae8(0x1b4),'IxMgA':_0x221ae8(0x10e),'CkPWO':_0x221ae8(0x176),'UXFYJ':_0x221ae8(0x283),'aMsHT':_0x221ae8(0x18d),'PXGQT':_0x221ae8(0x25e)};try{const {Id_Productos:_0x72aea4}=_0x5bae7a[_0x221ae8(0x1cf)];if(!_0x72aea4)return _0x3d42b7[_0x221ae8(0x1d7)](0x190)['json']({'status':_0x11b828[_0x221ae8(0x15b)],'message':_0x11b828[_0x221ae8(0x21f)]});const _0x24d799=await Productos['findByPk'](_0x72aea4);if(!_0x24d799)return _0x3d42b7[_0x221ae8(0x1d7)](0x194)[_0x221ae8(0xe6)]({'status':_0x11b828[_0x221ae8(0x15b)],'message':_0x11b828['IxMgA']});const _0x48f461=await Producto_Tallas[_0x221ae8(0xeb)]({'where':{'Id_Productos':_0x72aea4},'include':[{'model':Tallas,'as':_0x11b828[_0x221ae8(0x10c)],'attributes':[_0x221ae8(0x18d),_0x11b828[_0x221ae8(0x256)]]}]}),_0xbfd7f2=await Tallas[_0x221ae8(0xeb)]({'attributes':[_0x11b828[_0x221ae8(0x117)],_0x11b828['UXFYJ']]}),_0x196e9e=_0x48f461[_0x221ae8(0x15f)](_0x18f6fc=>({'Id_Producto_Tallas':_0x18f6fc[_0x221ae8(0xc5)],'Id_Tallas':_0x18f6fc['Id_Tallas'],'Nombre_Talla':_0x18f6fc['Id_Tallas_Talla']?.['Nombre']||'Sin\x20nombre','Stock':_0x18f6fc[_0x221ae8(0x116)]}));_0x3d42b7[_0x221ae8(0xe6)]({'status':_0x11b828[_0x221ae8(0x27e)],'message':_0x221ae8(0x129)+_0x24d799['Nombre'],'data':{'Id_Productos':_0x24d799[_0x221ae8(0xf1)],'Nombre_Producto':_0x24d799[_0x221ae8(0x283)],'Tallas_Configuradas':_0x196e9e,'Total_Tallas_Configuradas':_0x196e9e[_0x221ae8(0x154)],'Todas_Las_Tallas_Sistema':_0xbfd7f2['map'](_0xf1a76f=>({'Id_Tallas':_0xf1a76f['Id_Tallas'],'Nombre':_0xf1a76f['Nombre']})),'Total_Tallas_Sistema':_0xbfd7f2[_0x221ae8(0x154)]}});}catch(_0x1ec874){return console[_0x221ae8(0x1bc)](_0x221ae8(0x1b6),_0x1ec874),_0x3d42b7['status'](0x1f4)[_0x221ae8(0xe6)]({'status':_0x221ae8(0x1bc),'message':_0x1ec874[_0x221ae8(0xb4)]});}},exports['diagnosticarInsumosTamaño']=async(_0x181812,_0x3a4526)=>{const _0x33c84a=a0_0x15b2bd,_0x2a0b96={'uRGwo':function(_0x305ced,_0x5acfe0){return _0x305ced+_0x5acfe0;},'GbCiM':_0x33c84a(0x1bc),'kyuxk':'Id_Insumos_Insumo','KXPzj':_0x33c84a(0x25e),'pQYcP':_0x33c84a(0x1c1)};try{const {Id_Productos:_0xa8193e,nombreTamano:_0x489e9e}=_0x181812[_0x33c84a(0x1cf)],_0x3fe861=await Tamano[_0x33c84a(0xe5)]({'where':{'Nombre':_0x489e9e}});if(!_0x3fe861)return _0x3a4526[_0x33c84a(0x1d7)](0x194)['json']({'status':_0x2a0b96[_0x33c84a(0x12a)],'message':'Tamaño\x20'+_0x489e9e+_0x33c84a(0xcf)});const _0x28c95f=await Producto_Tamano[_0x33c84a(0xe5)]({'where':{'Id_Productos':_0xa8193e,'Id_Tamano':_0x3fe861[_0x33c84a(0x1ed)]}});if(!_0x28c95f)return _0x3a4526[_0x33c84a(0x1d7)](0x194)[_0x33c84a(0xe6)]({'status':_0x33c84a(0x1bc),'message':_0x33c84a(0x108)+_0x489e9e});const _0x1034e0=await Producto_Tamano_Insumos[_0x33c84a(0xeb)]({'where':{'Id_Producto_Tamano':_0x28c95f[_0x33c84a(0xd4)]},'include':[{'model':Insumos,'as':_0x2a0b96[_0x33c84a(0x1d3)],'required':!![]}]}),_0x165611=_0x1034e0[_0x33c84a(0x15f)]((_0x1f5b68,_0x2a4c71)=>{const _0xd733ea=_0x33c84a,_0xcba6c9={'index':_0x2a0b96['uRGwo'](_0x2a4c71,0x1),'Id_Insumo':_0x1f5b68[_0xd733ea(0x11c)][_0xd733ea(0x1fb)],'Nombre':_0x1f5b68[_0xd733ea(0x11c)][_0xd733ea(0x283)],'Cantidad_Consumo':_0x1f5b68['Cantidad_Consumo'],'Stock_Actual':_0x1f5b68[_0xd733ea(0x11c)][_0xd733ea(0x116)]};return _0xcba6c9;}),_0x3cfbd8={'status':_0x2a0b96[_0x33c84a(0x19b)],'producto_id':_0xa8193e,'tamano':{'nombre':_0x3fe861[_0x33c84a(0x283)],'id':_0x3fe861[_0x33c84a(0x1ed)],'cantidad_maxima':_0x3fe861[_0x33c84a(0x200)],'precio_venta':_0x3fe861[_0x33c84a(0x120)]},'insumos_configurados':_0x165611,'total_insumos':_0x1034e0[_0x33c84a(0x154)]};return _0x3a4526[_0x33c84a(0xe6)](_0x3cfbd8);}catch(_0x2e5051){return console[_0x33c84a(0x1bc)](_0x2a0b96[_0x33c84a(0x25b)],_0x2e5051),_0x3a4526[_0x33c84a(0x1d7)](0x1f4)['json']({'status':_0x2a0b96['GbCiM'],'message':_0x2e5051[_0x33c84a(0xb4)]});}};